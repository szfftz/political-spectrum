{"version":3,"file":"js/app.d2739b5e.js","mappings":"gGA+COA,MAAM,8BAA8BC,MAAA,yD,GAClCD,MAAM,qCAAqCC,MAAA,6B,0EADlDC,EAAAA,EAAAA,IAIM,MAJNC,EAIM,EAHJC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,EADJC,EAAAA,EAAAA,IAAeC,M,CA9CnB,OACEC,KAAM,MAENC,WAAY,CAAC,EAEbC,KAAAA,GACE,MAAMC,EAAoBA,KACxB,MAAMC,EAA0B,IAArBC,OAAOC,YAClBC,SAASC,gBAAgBf,MAAMgB,YAAY,OAAQ,GAAGL,QAGxD,IAAIM,EAAc,KAClB,MAAMC,EAAeA,KACfD,GACFE,aAAaF,GAEfA,EAAcG,WAAW,KACvBV,KACC,MAmBL,OAhBAW,EAAAA,EAAAA,IAAU,KACRX,IAEAE,OAAOU,iBAAiB,SAAUJ,GAElCN,OAAOU,iBAAiB,oBAAqBZ,GAE7CI,SAASQ,iBAAiB,mBAAoBZ,MAGhDa,EAAAA,EAAAA,IAAY,KACVX,OAAOY,oBAAoB,SAAUN,GACrCN,OAAOY,oBAAoB,oBAAqBd,GAChDI,SAASQ,iBAAiB,mBAAoBZ,KAGzC,CACP,CACF,G,UCnCJ,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,Q,6BCPI3B,MAAM,+F,GAGJ4B,IAAI,mBACJ5B,MAAM,UACNC,MAAA,oG,GAWA2B,IAAI,gBACJ5B,MAAM,iF,GAkBJ4B,IAAI,mBACJ5B,MAAM,kE,GAED4B,IAAI,cAAc5B,MAAM,qD,GAG3B4B,IAAI,gBACJ5B,MAAM,8F,GAGH4B,IAAI,eAAe5B,MAAM,qD,GAE1BA,MAAM,8H,gDAiCR4B,IAAI,eACJ5B,MAAM,8D,GAIN4B,IAAI,iBACJ5B,MAAM,8D,SAeSA,MAAM,oD,SAODA,MAAM,oD,GACzBA,MAAM,+C,GAEJA,MAAM,+C,0CAhHjBE,EAAAA,EAAAA,IA0HM,MA1HNC,EA0HM,EAvHJC,EAAAA,EAAAA,IAYO,MAZPC,EAYO,WACPD,EAAAA,EAAAA,IAoFM,MApFNyB,EAoFM,C,0aAjEJzB,EAAAA,EAAAA,IAsDM,MAtDN0B,EAsDM,EAlDJ1B,EAAAA,EAAAA,IAAuF,MAAvF2B,EAAuF,WAEvF3B,EAAAA,EAAAA,IAGO,MAHP4B,EAGO,WAEP5B,EAAAA,EAAAA,IAgCM,MAhCN6B,EAgCM,EA/BJ7B,EAAAA,EAAAA,IA8BM,MA9BN8B,EA8BM,EA3BJ9B,EAAAA,EAAAA,IAQS,UAPPJ,OAAKmC,EAAAA,EAAAA,IAAA,CAAC,kCAAiC,uBACNC,EAAAC,gBAAkBD,EAAAE,YAClDC,UAAWH,EAAAC,gBAAkBD,EAAAE,SAC7BE,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAO,gBAAAP,EAAAO,kBAAAD,IACRE,KAAK,UACN,SAED,GAAAC,IACAzC,EAAAA,EAAAA,IAQS,UAPPJ,OAAKmC,EAAAA,EAAAA,IAAA,CAAC,6CAA4C,sBAClBC,EAAAE,YAC/BC,SAAUH,EAAAE,SACVE,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAU,YAAAV,EAAAU,cAAAJ,IACRE,KAAK,UACN,SAED,GAAAG,IACA3C,EAAAA,EAAAA,IAQS,UAPPJ,OAAKmC,EAAAA,EAAAA,IAAA,CAAC,kCAAiC,uBACNC,EAAAY,eAChCT,UAAWH,EAAAY,YACXR,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAa,YAAAb,EAAAa,cAAAP,IACRE,KAAK,UACN,SAED,GAAAM,M,MAIJ9C,EAAAA,EAAAA,IAGO,MAHP+C,EAGO,WAEP/C,EAAAA,EAAAA,IAGO,MAHPgD,EAGO,W,8TAcAhB,EAAAE,W,WAAXpC,EAAAA,EAAAA,IAKM,MALNmD,EAKM,IAAAZ,EAAA,KAAAA,EAAA,KAJJrC,EAAAA,EAAAA,IAEM,OAFDJ,MAAM,oCAAoCsD,KAAK,U,EAClDlD,EAAAA,EAAAA,IAA2C,QAArCJ,MAAM,mBAAkB,Y,IAEhCI,EAAAA,EAAAA,IAAyD,KAAtDJ,MAAM,0CAAyC,OAAG,S,eAG5CoC,EAAAmB,gB,WAAXrD,EAAAA,EAAAA,IAYM,MAZNsD,EAYM,EAXJpD,EAAAA,EAAAA,IAUM,MAVNqD,EAUM,C,aATJrD,EAAAA,EAAAA,IAAwD,MAApDJ,MAAM,qCAAoC,SAAK,KACnDI,EAAAA,EAAAA,IAOM,MAPNsD,EAOM,EANJtD,EAAAA,EAAAA,IAES,UAFDJ,MAAM,kCAAmCwC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAuB,oBAAAvB,EAAAuB,sBAAAjB,IAAoBE,KAAK,UAAS,SAG1FxC,EAAAA,EAAAA,IAES,UAFDJ,MAAM,kCAAmCwC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAa,YAAAb,EAAAa,cAAAP,IAAYE,KAAK,UAAS,kB,wPCnHrF,MAAMgB,EACXC,2CAEWC,EACXD,mNAGWE,EAAeA,IAExBH,GACAE,IACCF,EAAaI,SAAS,uBACtBF,EAAkBE,SAAS,2BAC5BJ,EAAaI,SAAS,eAI1B,IAAIC,EAAiB,KAEd,MAAMC,EAAoBA,KAC/B,IAAKH,IACH,MAAM,IAAII,MAAM,oFAOlB,OAJKF,IACHA,GAAiBG,EAAAA,EAAAA,IAAaR,EAAcE,IAGvCG,GC9BII,EAAmB,CAC9B,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OCRK,SAASC,EAAeC,GAC7B,MAAMC,EAAQC,iBAAiB1D,SAASC,iBAAiB0D,iBAAiBH,GAAcI,OAExF,IAAKH,EAAO,CAEV,MAAMI,EAAW,CACf,kBAAmB,qBACnB,mBAAoB,qBACpB,iBAAkB,mBAClB,mBAAoB,qBACpB,oBAAqB,oBACrB,6BAA8B,UAC9B,uBAAwB,UACxB,wBAAyB,UACzB,4BAA6B,WAE/B,OAAOA,EAASL,IAAiBC,CACnC,CACA,OAAOA,CACT,CAEO,SAASK,GAAuB,IACrCC,EAAG,OACHC,EAAM,iBACNC,EAAgB,gBAChBC,EAAe,kBACfC,EAAiB,mBACjBC,IAGA,MAAMC,EAAOL,EAAOK,MAAQ,qBACtBC,EAAQN,EAAOM,OAAS,qBACxBC,EAAMP,EAAOO,KAAO,mBACpBC,EAAQR,EAAOQ,OAAS,qBACxBC,EAAiBT,EAAOS,gBAAkB,UAE1CC,EAAOX,EAAIY,OAAO,QAElBC,EAAkBF,EACrBC,OAAO,kBACPE,KAAK,KAAM,mBACXA,KAAK,gBAAiB,qBACtBA,KAAK,KAAM,KACXA,KAAK,KAAM,KACXA,KAAK,IAAK,OACbD,EACGD,OAAO,QACPE,KAAK,SAAU,MACfA,KAAK,aAAcR,GACnBQ,KAAK,eAAgB,OACxBD,EACGD,OAAO,QACPE,KAAK,SAAU,OACfA,KAAK,aAAcR,GACnBQ,KAAK,eAAgB,KAExB,MAAMC,EAAmBJ,EACtBC,OAAO,kBACPE,KAAK,KAAM,oBACXA,KAAK,gBAAiB,qBACtBA,KAAK,KAAM,KACXA,KAAK,KAAM,KACXA,KAAK,IAAK,OACbC,EACGH,OAAO,QACPE,KAAK,SAAU,MACfA,KAAK,aAAcN,GACnBM,KAAK,eAAgB,OACxBC,EACGH,OAAO,QACPE,KAAK,SAAU,OACfA,KAAK,aAAcN,GACnBM,KAAK,eAAgB,KAExB,MAAME,EAAqBL,EACxBC,OAAO,kBACPE,KAAK,KAAM,sBACXA,KAAK,gBAAiB,qBACtBA,KAAK,KAAM,KACXA,KAAK,KAAM,KACXA,KAAK,IAAK,OACbE,EACGJ,OAAO,QACPE,KAAK,SAAU,MACfA,KAAK,aAAcP,GACnBO,KAAK,eAAgB,OACxBE,EACGJ,OAAO,QACPE,KAAK,SAAU,OACfA,KAAK,aAAcP,GACnBO,KAAK,eAAgB,KAExB,MAAMG,EAAsBN,EACzBC,OAAO,kBACPE,KAAK,KAAM,uBACXA,KAAK,gBAAiB,qBACtBA,KAAK,KAAM,KACXA,KAAK,KAAM,KACXA,KAAK,IAAK,OACbG,EACGL,OAAO,QACPE,KAAK,SAAU,MACfA,KAAK,aAAcL,GACnBK,KAAK,eAAgB,OACxBG,EACGL,OAAO,QACPE,KAAK,SAAU,OACfA,KAAK,aAAcL,GACnBK,KAAK,eAAgB,KAExBd,EACGY,OAAO,QACPE,KAAK,IAAKZ,GACVY,KAAK,IAAKX,GACVW,KAAK,QAASV,GACdU,KAAK,SAAUT,GACfS,KAAK,OAAQJ,GAEhBV,EACGY,OAAO,QACPE,KAAK,IAAKZ,GACVY,KAAK,IAAKX,GACVW,KAAK,QAASV,GACdU,KAAK,SAAUT,GACfS,KAAK,OAAQ,yBACbA,KAAK,iBAAkB,UAE1Bd,EACGY,OAAO,QACPE,KAAK,IAAKZ,GACVY,KAAK,IAAKX,GACVW,KAAK,QAASV,GACdU,KAAK,SAAUT,GACfS,KAAK,OAAQ,0BACbA,KAAK,iBAAkB,UAE1Bd,EACGY,OAAO,QACPE,KAAK,IAAKZ,GACVY,KAAK,IAAKX,GACVW,KAAK,QAASV,GACdU,KAAK,SAAUT,GACfS,KAAK,OAAQ,4BACbA,KAAK,iBAAkB,UAE1Bd,EACGY,OAAO,QACPE,KAAK,IAAKZ,GACVY,KAAK,IAAKX,GACVW,KAAK,QAASV,GACdU,KAAK,SAAUT,GACfS,KAAK,OAAQ,6BACbA,KAAK,iBAAkB,SAC5B,CHnBE,OACEpF,KAAM,WACNE,KAAAA,GACE,MAAMsF,GAASC,EAAAA,EAAAA,MACTC,GAAgBtE,EAAAA,EAAAA,IAAI,MACpBuE,GAAmBvE,EAAAA,EAAAA,IAAI,MACvBwE,GAAexE,EAAAA,EAAAA,IAAI,MACnByE,GAAkBzE,EAAAA,EAAAA,IAAI,MACtB0E,GAAiB1E,EAAAA,EAAAA,IAAI,MACrB2E,GAAmB3E,EAAAA,EAAAA,IAAI,MACvB4E,GAAc5E,EAAAA,EAAAA,IAAI,MAClB6E,GAAgB7E,EAAAA,EAAAA,IAAI,MACpB8E,GAAe9E,EAAAA,EAAAA,IAAI,MACnB+E,GAAoB/E,EAAAA,EAAAA,IAAI,GAC9B,IAAIkD,EAAM,KACN5D,EAAc,KACd0F,EAAQ,GACRC,EAAa,KACjB,MAAMxE,GAAiBT,EAAAA,EAAAA,KAAI,GACrBkF,GAAalF,EAAAA,EAAAA,IAAI,GACjBmF,GAAiBnF,EAAAA,EAAAA,IAAI,GAErBoF,EAAqBC,UACzB,GAAKlD,IAKL,IACE,MAAMmD,EAAWhD,IAEjB,IACE,MAAQiD,KAAMC,EAASC,MAAOC,SAAmBJ,EAASK,IACxD,6BAGF,IAAKD,GAAwB,OAAZF,QAAgCI,IAAZJ,EAEnC,YADAL,EAAevC,MAAQ4C,EAG3B,CAAE,MAAOK,GACP,MACF,CAEA,MAAMC,EAAkB,IAAIC,IACtBC,EAAW,IACjB,IAAIC,EAAO,EACPC,GAAU,EAEd,MAAOA,EAAS,CACd,MAAQX,KAAMY,EAAUV,MAAOW,SAAqBd,EACjDW,KAAK,QACLI,OAAO,aACPC,IAAI,YAAa,KAAM,MACvBC,MAAM,KAAM,CAAEC,WAAW,IACzBC,MAAMR,EAAMA,EAAOD,EAAW,GAEjC,GAAII,EAEF,YADAjB,EAAevC,MAAQ,GAIrBuD,GAAYA,EAASO,OAAS,GAChCP,EAASQ,QAASC,IACO,OAAnBA,EAAKC,gBAAyCjB,IAAnBgB,EAAKC,WAClCf,EAAgBgB,IAAIF,EAAKC,aAI7BZ,GAAQD,EAEJG,EAASO,OAASV,IACpBE,GAAU,IAGZA,GAAU,CAEd,CAEAf,EAAevC,MAAQkD,EAAgBiB,IACzC,CAAE,MAAOC,GACP7B,EAAevC,MAAQ,CACzB,MA1DEuC,EAAevC,MAAQ,GA8DrBqE,EAAYA,KACT,CACLzD,KAAMd,EAAe,mBACrBe,MAAOf,EAAe,oBACtBgB,IAAKhB,EAAe,kBACpBiB,MAAOjB,EAAe,oBACtBkB,eAAgBlB,EAAe,8BAC/BwE,SAAUxE,EAAe,0BAIvByE,EAAW,GAEXC,EAAWD,GAAY,EAAI,GAC3BE,EAAY,GAClB,IAAIC,EAAY,EACZC,EAAa,EACbC,EAAwB,EACxBC,EAAwB,EAC5B,MAAM/G,GAAWV,EAAAA,EAAAA,KAAI,GACf2B,GAAgB3B,EAAAA,EAAAA,KAAI,GACpB0H,GAAkB1H,EAAAA,EAAAA,IAAI,MACtB2H,GAAY3H,EAAAA,EAAAA,IAAI,MAChB4H,GAAY5H,EAAAA,EAAAA,IAAI,MAChBoB,GAAcpB,EAAAA,EAAAA,KAAI,GAElB6H,EAAuBA,CAC3BC,EACAC,EACAC,EACAC,EACAC,IAGEJ,EAAIK,GAAKJ,GACTD,EAAIK,GAAKF,GACTH,EAAIM,GAAKJ,GACTF,EAAIM,GAAKF,EAIPG,EAAgBA,CACpBC,EACAhF,EACAC,EACAgF,EACAC,KAEA,IAAKlE,EAAc1B,QAAU2B,EAAiB3B,MAAO,OAErD,MAAM6F,EAAkB,EAElBV,EAAeO,EACfN,EAAcS,EACdR,EAAgBF,EAAezE,EAC/B4E,EAAiBF,EAAczE,EAEjCoB,EAAiB/B,QACnB+B,EAAiB/B,MAAM8F,UAAY,IAGrC,MAAMC,EAAcpE,EAAiB3B,MAAMgG,wBAE3C5D,EAAM2B,QAASmB,IACb,MAAMe,EAAa1J,SAAS2J,cAAc,OAC1CD,EAAWE,UACT,gJACFF,EAAWG,aAAa,YAAalB,EAAIlJ,MAEzCiK,EAAWxK,MAAM4K,MAAQ,GAAG7B,MAC5ByB,EAAWxK,MAAM6K,OAAS,GAAG7B,MAC7BwB,EAAWxK,MAAM8K,cAAgB,OAEjC,MAAMhB,EAAIQ,EAAYS,KAAOtB,EAAIK,EAC3BC,EAAIO,EAAYU,IAAMvB,EAAIM,EAE1BkB,GAAclC,EAAW,EACzBmC,GAAclC,EAAY,EAChCwB,EAAWxK,MAAMmL,UAAY,aAAaF,QAAiBC,OAC3DV,EAAWxK,MAAM+K,KAAO,GAAGjB,MAC3BU,EAAWxK,MAAMgL,IAAM,GAAGjB,MAE1B,MAAMqB,EAAgBtK,SAAS2J,cAAc,OAC7CW,EAAcV,UACZ,oEAEF,MAAMW,EAAcvK,SAAS2J,cAAc,QAC3CY,EAAYX,UAAY,sDACxBW,EAAYC,YAAc7B,EAAIlJ,KAE9B6K,EAAcG,YAAYF,GAC1Bb,EAAWe,YAAYH,GAEvB,IAAII,GAAa,EACbC,EAAahC,EACbiC,EAAmB,KAEvB,MAAMC,EAAcC,IACbJ,GAAcC,IAAehC,GAAQvD,EAAiB3B,QAEvDqH,GAAGjJ,MAAMkJ,aAAa,UAAYD,EAAEE,YACtCF,EAAEG,iBAGAL,GACFM,qBAAqBN,GAGvBA,EAAmBO,sBAAsB,KACvC,MAAMC,EAAgBhG,EAAiB3B,MAAMgG,wBAC7C,IAAI4B,EAASC,EAEb,GAAIR,EAAEjJ,KAAKkJ,WAAW,SAAU,CAC9B,MAAMQ,EAAQT,EAAEU,QAAQ,IAAMV,EAAEW,eAAe,GAC/CJ,EAAUE,EAAMF,QAAUD,EAAcnB,KACxCqB,EAAUC,EAAMD,QAAUF,EAAclB,GAC1C,MACEmB,EAAUP,EAAEO,QAAUD,EAAcnB,KACpCqB,EAAUR,EAAEQ,QAAUF,EAAclB,IAGtC,MAAMwB,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAChC4B,EAAO,EACPC,EAAOF,EACPG,EAAO,EACPC,EAAOzC,EAEP0C,EAAeC,KAAKC,IAAIN,EAAMK,KAAKE,IAAIN,EAAMP,IAC7Cc,EAAeH,KAAKC,IAAIJ,EAAMG,KAAKE,IAAIJ,EAAMR,IAEnD3C,EAAIK,EAAI+C,EACRpD,EAAIM,EAAIkD,EAER,MAAMnD,EAAIoC,EAAcnB,KAAO8B,EACzB9C,EAAImC,EAAclB,IAAMiC,EACxBhC,GAAclC,EAAW,EACzBmC,GAAclC,EAAY,EAChCwB,EAAWxK,MAAMmL,UAAY,aAAaF,QAAiBC,OAC3DV,EAAWxK,MAAM+K,KAAO,GAAGjB,MAC3BU,EAAWxK,MAAMgL,IAAM,GAAGjB,MAE1BmD,QAIEC,EAAYA,KAChB,IAAK3B,GAAcC,IAAehC,EAAK,OACvC+B,GAAa,EACbhB,EAAWxK,MAAMoN,OAAS,IAC1B5C,EAAW6C,UAAUC,OAAO,eAExB5B,IACFM,qBAAqBN,GACrBA,EAAmB,MAGrB,MAAM6B,EAAe/D,EACnBC,EACAC,EACAC,EACAC,EACAC,GAGF,GAAK0D,EAyBHC,EAAwBvD,EAAmBE,QAxB3C,GAAIV,EAAIK,EAAIG,EACVuD,EAAwBvD,EAAmBE,OACtC,CACLK,EAAW6C,UAAU5E,IAAI,wBAEzBgB,EAAIK,EAAIL,EAAIgE,SACZhE,EAAIM,EAAIN,EAAIiE,SAEZ,MAAMxB,EAAgBhG,EAAiB3B,MAAMgG,wBACvCT,EAAIoC,EAAcnB,KAAOtB,EAAIK,EAC7BC,EAAImC,EAAclB,IAAMvB,EAAIM,EAC5BkB,GAAclC,EAAW,EACzBmC,GAAclC,EAAY,EAChCwB,EAAWxK,MAAMmL,UAAY,aAAaF,QAAiBC,OAC3DV,EAAWxK,MAAM+K,KAAO,GAAGjB,MAC3BU,EAAWxK,MAAMgL,IAAM,GAAGjB,MAE1B3I,WAAW,KACToJ,EAAW6C,UAAUC,OAAO,yBAC3B,KAEHE,EAAwBvD,EAAmBE,EAC7C,CAKF+C,IAEApM,SAASU,oBAAoB,YAAamK,GAC1C7K,SAASU,oBAAoB,UAAW2L,GACxCrM,SAASU,oBAAoB,YAAamK,GAC1C7K,SAASU,oBAAoB,WAAY2L,GACzCrM,SAASU,oBAAoB,cAAe2L,IAGxCQ,EAAe/B,IACnBJ,GAAa,EACbC,EAAahC,EACbe,EAAWxK,MAAMoN,OAAS,OAC1B5C,EAAW6C,UAAU5E,IAAI,eAEzB3H,SAASQ,iBAAiB,YAAaqK,GACvC7K,SAASQ,iBAAiB,UAAW6L,GACrCrM,SAASQ,iBAAiB,YAAaqK,EAAY,CAAEiC,SAAS,IAC9D9M,SAASQ,iBAAiB,WAAY6L,GAEtCrM,SAASQ,iBAAiB,cAAe6L,GAEzCvB,EAAEG,kBAGJvB,EAAWlJ,iBAAiB,YAAaqM,GACzCnD,EAAWlJ,iBAAiB,aAAcqM,EAAa,CAAEC,SAAS,IAE9DtH,EAAiB/B,OACnB+B,EAAiB/B,MAAMgH,YAAYf,KAIvCgD,EAAwBvD,EAAmBE,IAGvCqD,EAA0BA,CAACK,EAAgB1D,KAC/C,IAAK7D,EAAiB/B,QAAU2B,EAAiB3B,MAAO,OAExD,IAAIuJ,EAAiBnH,EAClBoH,OAAQtE,GAAQA,EAAIK,EAAI+D,GACxBG,KAAK,CAACC,EAAGC,KACR,MAAMC,EAAS/J,EAAiBgK,QAAQH,EAAE1N,MACpC8N,EAASjK,EAAiBgK,QAAQF,EAAE3N,MAC1C,OAAO4N,EAASE,IAGpB,GAA8B,IAA1BP,EAAezF,OAAc,OAEjC,MAAM+B,EAAkB,EAElBkE,EAAatF,EAAY,GACzBuF,EAAcT,EAAezF,OAASiG,EAAa,GAEnDpJ,EAAqBiF,EAAkBC,EAEvCoE,EACJpE,GAAmBlF,EAAqBqJ,GAAe,EAAIvF,EAAY,EACnEyF,EAAS3B,KAAKC,IAAI3C,EAAkBpB,EAAY,EAAGwF,GAEnDE,EAAe,GACfC,EAASd,EAAiB9E,EAAW,EAAI2F,EAE/CZ,EAAexF,QAAQ,CAACmB,EAAKmF,KAC3B,MAAMC,EAAOF,EACPG,EAAOL,EAASG,EAAQN,EAE9B7E,EAAIK,EAAI+E,EACRpF,EAAIM,EAAI+E,EACRrF,EAAIgE,SAAWoB,EACfpF,EAAIiE,SAAWoB,IAGjB,MAAMxE,EAAcpE,EAAiB3B,MAAMgG,wBAEvCjE,EAAiB/B,OACnBoC,EAAM2B,QAASmB,IACb,MAAMe,EAAalE,EAAiB/B,MAAMwK,cAAc,eAAetF,EAAIlJ,UAC3E,GAAIiK,EAAY,CACdA,EAAW6C,UAAU5E,IAAI,wBAEzB,MAAMqB,EAAIQ,EAAYS,KAAOtB,EAAIK,EAC3BC,EAAIO,EAAYU,IAAMvB,EAAIM,EAC1BkB,GAAclC,EAAW,EACzBmC,GAAclC,EAAY,EAChCwB,EAAWxK,MAAMmL,UAAY,aAAaF,QAAiBC,OAC3DV,EAAWxK,MAAM+K,KAAO,GAAGjB,MAC3BU,EAAWxK,MAAMgL,IAAM,GAAGjB,MAE1B3I,WAAW,KACToJ,EAAW6C,UAAUC,OAAO,yBAC3B,IACL,KAKA0B,EAA6BxC,IAC5BA,GAAkBA,GAAkB,EAAU,EAC3B,GAAjBA,EAGHyC,EAAwBA,CAACC,EAAWC,EAAW,EAAGhF,EAAkB,QACxE,MAAMiF,EAAY,GACZd,EAAatF,EAAY,GAEzBqG,EAAQjL,EAERmK,EAAcc,EAAMhH,OAASiG,EAAa,GAEhD,IAAIG,EAASzF,EAAY,EACzB,GAAImB,EAAiB,CACnB,MAAMqE,GAAgBrE,EAAkBoE,GAAe,EAAIvF,EAAY,EACvEyF,EAAS3B,KAAKC,IAAI/D,EAAY,EAAGwF,EACnC,CAEA,MAAME,EAAe,GACfC,EAASQ,EAAWD,EAAYnG,EAAW,EAAI2F,EAerD,OAbAW,EAAM/G,QAAQ,CAAC/H,EAAMqO,KACnB,MAAM9E,EAAI6E,EACJ5E,EAAI0E,EAASG,EAAQN,EAE3Bc,EAAUE,KAAK,CACbxF,IACAC,IACA0D,SAAU3D,EACV4D,SAAU3D,EACVxJ,WAIG6O,GAGHlC,EAAoBA,KACxB,IAAKtG,IAAe/B,IAAQsB,EAAa5B,MAAO,OAEhD,IAAK2B,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCJ,EAAkB+B,EAAcrB,OAChC2B,EAAiBN,EAActB,MAE/BX,EAAoB+E,EAA0BxC,GAC9CtC,EAAoB8E,EAA0BxC,GACpD9F,EAAkBnC,MAAQ2F,EAE1B,MAAME,EAAkB,EAElBmF,EAAgB/C,EAAiBvC,EAAoBC,EACrDsF,EAAiBrF,EAAkBC,EAEnCV,EAAeO,EACfN,EAAcS,EACdR,EAAgBF,EAAe6F,EAC/B1F,EAAiBF,EAAc6F,EAErC5I,EAAW6I,UAAU,KAAKnC,SAE1B,MAAMoC,EAAc,GACpB/I,EAAM2B,QAAQ,CAACmB,EAAKmF,KAClB,MAAMrB,EAAe/D,EACnBC,EACAC,EACAC,EACAC,EACAC,GAGF,GAAI0D,EAAc,CAChB,MAAMoC,EAAYlG,EAAIK,EAAIJ,EACpBkG,EAAYnG,EAAIM,EAAIJ,EACpBkG,EAAW/C,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAM2C,EAAYJ,EAAiB,MACnEO,EAAWhD,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAM4C,EAAYJ,EAAkB,MAC1EE,EAAYJ,KAAK,CACf/O,KAAMkJ,EAAIlJ,MAAQ,MAAMqO,EAAQ,IAChC9E,EAAGL,EAAIK,EACPC,EAAGN,EAAIM,EACP8F,SAAU/C,KAAKiD,MAAiB,IAAXF,GAAkB,IACvCC,SAAUhD,KAAKiD,MAAiB,IAAXD,GAAkB,KAE3C,IAGF,MAAME,EAAsBN,EAAYO,IAAK1H,GAASA,EAAKhI,MAErD2P,EAAuB9L,EAAiB+L,KAC3C5P,IAAUyP,EAAoBjM,SAASxD,IAEpC6P,GAAsBF,EACtBG,EAAqBjO,EAAemC,MAC1CnC,EAAemC,MAAQ6L,GAGpBA,GACAC,IAAuBD,IAAsBJ,EAAoB3H,SAKpEqH,EAAY1B,KAAK,CAACC,EAAGC,IAAMD,EAAE4B,SAAW3B,EAAE2B,WAGtCS,EAAoBA,KACxB,IAAKnK,EAAa5B,QAAU2B,EAAiB3B,MAAO,OAGpD,MAAMgM,EAAgB3H,IAChB4H,EACJD,EAAcpL,MACdoL,EAAcnL,OACdmL,EAAclL,KACdkL,EAAcjL,OACdiL,EAAchL,eAGhB,IAAKiL,EAMH,YALAvE,sBAAsB,KACpB7K,WAAW,KACTkP,KACC,MAKPG,EAAAA,IAAUtK,EAAa5B,OAAOkL,UAAU,OAAOnC,SAE/C,MAAMpB,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAGtC,GAAI2B,GAAkB,GAAKrC,GAAmB,EAI5C,YAHA8B,sBAAsB,KACpBqE,MAKJ,MAAMrG,EAAoB+E,EAA0BxC,GAC9CkE,EAAa1B,EAA0BxC,GAC7C9F,EAAkBnC,MAAQmM,EAE1B,MAAMtG,EAAkB,EAElBnF,EAAoBuH,EAAiBvC,EAAoByG,EACzDxL,EAAqBiF,EAAkBC,EAEvCrF,EAAmBkF,EACnBjF,EAAkBoF,EAwBxB,GAtBAvF,EAAM4L,EAAAA,IACItK,EAAa5B,OACpBkB,OAAO,OACPE,KAAK,QAAS6G,GACd7G,KAAK,SAAUwE,GACfxE,KAAK,QAAS,yCACd3F,MAAM,iBAAkB,QAG3B4E,EAAuB,CACrBC,MACAC,OAAQyL,EACRxL,mBACAC,kBACAC,oBACAC,uBAGF0B,EAAa/B,EAAIY,OAAO,KAAKE,KAAK,QAAS,kBAE3CkB,EAAWtC,MAAQH,EAAiBiE,OAEf,IAAjB1B,EAAM0B,OACR1B,EAAQsI,EAAsBhF,EAAmB,EAAGE,OAC/C,CACL,MAAMwG,EAAe1B,EAAsBhF,EAAmB,EAAGE,GACjExD,EAAQgK,EAAaV,IAAI,CAACW,EAAQhC,KAChC,MAAMiC,EAAWlK,EAAMiI,GACvB,MAAO,IACFiC,EACH/G,EAAG+G,EAAWA,EAAS/G,EAAI8G,EAAO9G,EAClCC,EAAG8G,EAAWA,EAAS9G,EAAI6G,EAAO7G,EAClC0D,SAAUoD,GAAYA,EAASpD,SAAWoD,EAASpD,SAAWmD,EAAOnD,SACrEC,SAAUmD,GAAYA,EAASnD,SAAWmD,EAASnD,SAAWkD,EAAOlD,SACrEnN,KAAMqQ,EAAOrQ,OAGnB,CAcA,GAZAyJ,EACEC,EACAhF,EACAC,EACAwL,EACAvG,GAGF8B,sBAAsB,KACpBiB,MAGEhH,EAAiB3B,MAAO,CAC1B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBAC7CtB,EAAYiD,EAActB,MAC1B1B,EAAagD,EAAcrB,OAC3B1B,EAAwBc,EACxBb,EAAwBsH,CAC1B,GAGIxP,EAAeA,KACfD,GACFE,aAAaF,GAEfA,EAAcG,WAAW,KACvB,IAAK8E,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCuG,EAAW5E,EAActB,MACzBmG,EAAY7E,EAAcrB,OAE1BmG,EAAuBhC,EAA0B8B,GACjDG,EAAuBjC,EAA0B8B,GAEjDI,EAAmBJ,EAAWE,EAAuBC,EACrDE,EAAoBJ,EAEpBK,EAAkBJ,EAClBK,EAAiB,EACjBC,EAAmBF,EAAkBF,EACrCK,EAAoBF,EAAiBF,EAErCK,EAASV,EAAW7H,EACpBwI,EAASV,EAAY7H,EAE3BvC,EAAQA,EAAMsJ,IAAKxG,IACjB,MAAMiI,EAAqBvI,EAAwB,GAAKM,EAAIK,EAAIX,EAEhE,IAAI0F,EAAMC,EAAM6C,EAAaC,EAE7B,GAAIF,EAAoB,CACtB,MAAM/B,EACJxG,EAAwB,EAAIM,EAAIgE,SAAWtE,EAAwB,GACrE0F,EAAO/B,KAAKC,IAAI,EAAGD,KAAKE,IAAIgE,EAAsBA,EAAuBrB,IAEzEb,EAAOhC,KAAKC,IAAI,EAAGD,KAAKE,IAAI+D,EAAWtH,EAAIM,EAAI0H,IAE/C,MAAMI,EAAgB5C,EAAsB+B,EAAsB,EAAGD,GAC/De,EAAUD,EAAcE,KAAMC,GAAMA,EAAEzR,OAASkJ,EAAIlJ,MACrDuR,GACFH,EAAcG,EAAQrE,SACtBmE,EAAcE,EAAQpE,WAEtBiE,EAAc9C,EACd+C,EAAc9C,EAElB,KAAO,CACL,MAAMmD,EAAoBhJ,EAAYE,EAAwBC,EACxD8I,EAAqBhJ,EACrBiJ,EAAmBhJ,EACnBiJ,EAAkB,EAExB,GAAIH,EAAoB,GAAKC,EAAqB,EAAG,CACnD,MAAMvC,GAAalG,EAAIK,EAAIqI,GAAoBF,EACzCrC,GAAanG,EAAIM,EAAIqI,GAAmBF,EAExCG,EAAmBvF,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAG2C,IAC3C2C,EAAmBxF,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAG4C,IAEjDf,EAAOuC,EAAkBiB,EAAmBnB,EAC5CpC,EAAOuC,EAAiBiB,EAAmBnB,EAE3C,MAAM1E,EAAO2E,EACP1E,EAAO4E,EACP3E,EAAO0E,EACPzE,EAAO2E,EACb1C,EAAO/B,KAAKC,IAAIN,EAAMK,KAAKE,IAAIN,EAAMmC,IACrCC,EAAOhC,KAAKC,IAAIJ,EAAMG,KAAKE,IAAIJ,EAAMkC,GACvC,MACED,EAAOpF,EAAIK,EAAI0H,EACf1C,EAAOrF,EAAIM,EAAI0H,EAGjB,MAAMI,EAAgB5C,EAAsB+B,EAAsB,EAAGD,GAC/De,EAAUD,EAAcE,KAAMC,GAAMA,EAAEzR,OAASkJ,EAAIlJ,MACrDuR,GACFH,EAAcG,EAAQrE,SACtBmE,EAAcE,EAAQpE,WAEtBiE,EAAc7E,KAAKC,IAAI,EAAGD,KAAKE,IAAIgE,EAAsBvH,EAAIgE,WAC7DmE,EAAcnI,EAAIiE,SAAW+D,EAEjC,CAEA,MAAO,IACFhI,EACHK,EAAG+E,EACH9E,EAAG+E,EACHrB,SAAUkE,EACVjE,SAAUkE,KAIV/M,GACFA,EAAIc,KAAK,QAASmL,GAAUnL,KAAK,SAAUoL,GAG7CT,KACC,MAGCiC,EAAmBvL,UACvB,IACE,MAAMwL,EAAYC,KAAKC,MAAMC,WACvBC,EAAS9F,KAAK8F,SAASD,SAAS,IAAIE,UAAU,EAAG,IACjDC,EAAaC,KAAKC,UAAU9L,GAC5B+L,EAAW,GAAGT,KAAaI,KAAUE,IAErCI,EAAU,IAAIC,YACdC,EAAaF,EAAQG,OAAOJ,GAC5BK,QAAmBC,OAAOC,OAAOC,OAAO,UAAWL,GAEnDM,EAAYC,MAAM/L,KAAK,IAAIgM,WAAWN,IACtCO,EAAUH,EAAUzD,IAAK/B,GAAMA,EAAEyE,SAAS,IAAImB,SAAS,EAAG,MAAMC,KAAK,IAE3E,OAAOF,EAAQhB,UAAU,EAAG,GAC9B,CAAE,MAAOzL,GACP,MAAMoL,EAAYC,KAAKC,MAAMC,SAAS,IAChCC,EAAS9F,KAAK8F,SAASD,SAAS,IAAIE,UAAU,EAAG,IACjDmB,EAAWC,KAAKlB,KAAKC,UAAU9L,IAAO2L,UAAU,EAAG,IACzD,MAAO,GAAGL,KAAaI,KAAUoB,GACnC,GAGIE,EAAc,CAClBC,GAAAA,CAAI5T,EAAMgE,EAAO6P,EAAO,KACtB,MAAMC,EAAU,IAAI5B,KACpB4B,EAAQC,QAAQD,EAAQE,UAAmB,GAAPH,EAAY,GAAK,GAAK,KAE1D,MAAMI,EAAwC,WAA7B5T,OAAO6T,SAASC,SAC3BC,EAAaH,EAAW,WAAa,GAC3C1T,SAAS8T,OAAS,GAAGrU,KAAQsU,mBAAmBtQ,cAAkB8P,EAAQS,qCAAqCH,GACjH,EAEAI,GAAAA,CAAIxU,GACF,MAAMyU,EAASzU,EAAO,IAChB0U,EAAUnU,SAAS8T,OAAOM,MAAM,KACtC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAQ5M,OAAQ8M,IAAK,CACvC,IAAIP,EAASK,EAAQE,GACrB,MAA4B,MAArBP,EAAOQ,OAAO,GAAYR,EAASA,EAAO/B,UAAU,EAAG+B,EAAOvM,QACrE,GAA+B,IAA3BuM,EAAOxG,QAAQ4G,GACjB,OAAOK,mBAAmBT,EAAO/B,UAAUmC,EAAO3M,OAAQuM,EAAOvM,QAErE,CACA,OAAO,IACT,EAEAiN,IAAAA,GACE,IACE,MAAMC,EAAW,eAAiB9C,KAAKC,MACvC8C,KAAKrB,IAAIoB,EAAU,OAAQ,GAC3B,MAAME,EAAgC,SAAvBD,KAAKT,IAAIQ,GAExB,OADAC,KAAKlI,OAAOiI,GACLE,CACT,CAAE,MAAO7J,GACP,OAAO,CACT,CACF,EAEA0B,MAAAA,CAAO/M,GACLO,SAAS8T,OAAS,GAAGrU,kDACvB,GAGImV,EAAyBA,KACxB5U,SAAS6U,QACZ5O,MAIJ1F,EAAAA,EAAAA,IAAU,KACR6S,EAAYoB,OAEZvO,IAEAjG,SAASQ,iBAAiB,mBAAoBoU,GAE9C,MAAME,EAAgB1B,EAAYa,IAAI,yBAQtC,GAPIa,GACFvM,EAAgB9E,MAAQqR,EACxB7S,EAAYwB,OAAQ,GAEpBxB,EAAYwB,OAAQ,EAGlBqR,EAAe,CACjB,MAAMC,EAAiB3B,EAAYa,IAAI,iCACnCc,IACFvM,EAAU/E,MAAQsR,GAGpB,MAAMC,EAAiB5B,EAAYa,IAAI,gCACnCe,IACFvM,EAAUhF,MAAQuR,EAEtB,CAEA,IAAIC,GAAe,EAEfC,EAAoB,KAExB,MAAMC,EAAqB/B,EAAYa,IAAI,gCAC3C,GAAIkB,EACF,IACE,MAAMC,EAASnD,KAAKoD,MAAMF,GACtBC,GAA4B,kBAAXA,IACnBF,EAAoBE,EAEpBH,EAAe3R,EAAiB+L,KAAM5P,IACpC,MAAMyR,EAAIgE,IAAoBzV,GAC9B,OAAOyR,QAAazK,IAARyK,EAAElI,QAA2BvC,IAARyK,EAAEjI,GAA2B,OAARiI,EAAElI,GAAsB,OAARkI,EAAEjI,IAG9E,CAAE,MAAO6B,GACPoK,EAAoB,IACtB,CAGGD,IACHA,EAAe3R,EAAiB+L,KAAM5P,IACpC,MAAMsP,EAAWqE,EAAYa,IAAI,sBAAsBxU,OACjDuP,EAAWoE,EAAYa,IAAI,sBAAsBxU,OAEvD,OAAoB,OAAbsP,GAAkC,OAAbC,MAKhCsG,EAAAA,EAAAA,IAAS,KACPnK,sBAAsB,KACpB,IAAK/F,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAGtC,GAAI2B,GAAkB,GAAKrC,GAAmB,EAQ5C,YAPA/I,WAAW,KACT,IAAK8E,EAAiB3B,MAAO,OAC7B,MAAM8R,EAAYnQ,EAAiB3B,MAAMgG,wBACrC8L,EAAUzL,MAAQ,GAAKyL,EAAUxL,OAAS,GAC5CyF,KAED,KAIL,MAAMrG,EAAoB+E,EAA0BxC,GAE9C8J,EAAmBrH,EAAsBhF,EAAmB,EAAGE,GAErE,GAAI4L,EAAc,CAChB,IAAK7P,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAEhCX,EAAoB8E,EAA0BxC,GACpD9F,EAAkBnC,MAAQ2F,EAE1B,MAAMqF,EAAgB/C,EAAiBvC,EAAoBC,EACrDsF,EAAiBrF,EAEjBT,EAAeO,EACfN,EAAc,EAEpBhD,EAAQvC,EAAiB6L,IAAI,CAAC1P,EAAMqO,KAClC,MAAM2H,EAAaD,EAAiB1H,GAE9B4H,EAAgBR,IAAoBzV,GACpCkW,OACiBlP,IAArBiP,GAAe1M,GAAwC,OAArB0M,GAAe1M,EAC7C4M,OAAOF,EAAc1M,GACrBoK,EAAYa,IAAI,sBAAsBxU,OACtCoW,OACiBpP,IAArBiP,GAAezM,GAAwC,OAArByM,GAAezM,EAC7C2M,OAAOF,EAAczM,GACrBmK,EAAYa,IAAI,sBAAsBxU,OAE5C,IAAIuJ,EAAIyM,EAAWzM,EACfC,EAAIwM,EAAWxM,EAEnB,GACoB,OAAlB0M,GACkB,OAAlBE,GACkB,OAAlBF,GACkB,OAAlBE,EACA,CACA,MAAM9G,EAAW+G,WAAWH,GACtB3G,EAAW8G,WAAWD,GAC5B7M,EAAIJ,EAAgBmG,EAAW,IAAON,EACtCxF,EAAIJ,EAAemG,EAAW,IAAON,CACvC,CAEA,MAAO,CACL1F,EAAGA,EACHC,EAAGA,EACH0D,SAAU8I,EAAW9I,SACrBC,SAAU6I,EAAW7I,SACrBnN,KAAMA,KAIViN,EAAwBvD,EAAmBE,EAC7C,MACExD,EAAQ2P,EAGVhG,IACA1P,OAAOU,iBAAiB,SAAUJ,SAKxC,MAAMwB,EAAiBsE,UACrB,IAAI3E,EAASkC,MAAb,CAEAlC,EAASkC,OAAQ,EAEjB,IACE,IAAK2B,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAEhCZ,EAAoB+E,EAA0BxC,GAC9CtC,EAAoB8E,EAA0BxC,GACpD9F,EAAkBnC,MAAQ2F,EAE1B,MAAMqF,EAAgB/C,EAAiBvC,EAAoBC,EACrDsF,EAAiBrF,EAEjBT,EAAeO,EACfN,EAAc,EACdC,EAAgBF,EAAe6F,EAC/B1F,EAAiBF,EAAc6F,EAE/BqH,EAAazS,EAAiB6L,IAAK1P,IACvC,MAAMkJ,EAAM9C,EAAMoL,KAAM7D,GAAMA,EAAE3N,OAASA,GACzC,IAAIuJ,GAAK,EACLC,GAAK,EAET,GAAIN,EAAK,CACP,MAAM8D,EAAe/D,EACnBC,EACAC,EACAC,EACAC,EACAC,GAGF,GAAI0D,EAAc,CAChB,MAAMoC,EAAYlG,EAAIK,EAAIJ,EACpBmG,EAAW/C,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAM2C,EAAYJ,EAAiB,MACzEzF,EAAIgD,KAAKiD,MAAiB,IAAXF,GAAkB,IAEjC,MAAMD,EAAYnG,EAAIM,EAAIJ,EACpBmG,EAAWhD,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAM4C,EAAYJ,EAAkB,MAC1EzF,EAAI+C,KAAKiD,MAAiB,IAAXD,GAAkB,GACnC,CACF,CAEA,MAAO,CACLvP,KAAMA,EACNuJ,EAAGA,EACHC,EAAGA,KAIP,IAAI+M,EAAWzN,EAAgB9E,MAC1BuS,IACHA,QAAiBvE,EAAiBsE,GAClCxN,EAAgB9E,MAAQuS,GAG1B,MAAMC,GAAS,IAAItE,MAAOuE,cACpBC,EAAUJ,EAAW5G,IAAK1H,IAAI,CAClCC,UAAWsO,EACXvW,KAAMgI,EAAKhI,KACXuJ,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRmN,UAAWH,KAGb7C,EAAYC,IAAI,wBAAyB2C,EAAU,KAEnD,MAAMpE,GAAM,IAAID,MAAO0E,eAAe,QAAS,CAC7CC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,YAGLnO,EAAU/E,QACb+E,EAAU/E,MAAQmO,EAClBwB,EAAYC,IAAI,gCAAiCzB,EAAK,MAGxDnJ,EAAUhF,MAAQmO,EAClBwB,EAAYC,IAAI,+BAAgCzB,EAAK,KAErD,MAAMgF,EAAqB,CAAC,EAqC5B,GAnCA/Q,EAAM2B,QAASmB,IACb,MAAM8D,EAAe/D,EACnBC,EACAC,EACAC,EACAC,EACAC,GAGF,GAAI0D,EAAc,CAChB,MAAMoC,EAAYlG,EAAIK,EAAIJ,EACpBmG,EAAW/C,KAAKC,IACpB,EACAD,KAAKE,IAAI,IAAM2C,EAAYJ,EAAiB,MAC5CoI,QAAQ,GAEJ/H,EAAYnG,EAAIM,EAAIJ,EACpBmG,EAAWhD,KAAKC,IACpB,EACAD,KAAKE,IAAI,IAAM4C,EAAYJ,EAAkB,MAC7CmI,QAAQ,GAEVD,EAAmBjO,EAAIlJ,MAAQ,CAAEuJ,EAAG+F,EAAU9F,EAAG+F,EACnD,MACE4H,EAAmBjO,EAAIlJ,MAAQ,CAAEuJ,EAAG,KAAMC,EAAG,QAIjDmK,EAAYC,IAAI,+BAAgCpB,KAAKC,UAAU0E,GAAqB,KAEpFrO,EAAgB9E,MAAQuS,EACxB/T,EAAYwB,OAAQ,EAEpB2I,KAEKpJ,IAGH,OAFAzB,EAASkC,OAAQ,OACjBwB,EAAOuJ,KAAK,KAId,MAAMrI,EAAWhD,KAETiD,KAAM0Q,EAAWxQ,MAAOyQ,SAAqB5Q,EAClDW,KAAK,QACLI,OAAO,MACPE,MAAM,KAAM,CAAEC,WAAW,IACzB2P,MAAM,GACNC,cAEH,GAAIF,EACF,MAAM,IAAI3T,MAAM,gBAAgB2T,EAAWG,WAG7C,MAAMC,EAAQL,GAAWM,IAAM,EAEzBC,EAAkB,GAClBC,EAAkB,GACxB,IAAIC,EAASJ,EAAQ,EAErB,IAAK,MAAMK,KAAUrB,EAAS,CAC5B,MAAQ/P,KAAMqR,EAAcnR,MAAOW,SAAqBd,EACrDW,KAAK,QACLI,OAAO,MACPwQ,GAAG,YAAaF,EAAO9P,WACvBgQ,GAAG,OAAQF,EAAO/X,MAClBwX,cAEH,GAAIhQ,EACF,MAAM,IAAI7D,MAAM,cAAc6D,EAAWiQ,WAGvCO,EACFH,EAAgB9I,KAAK,CACnB4I,GAAIK,EAAaL,GACjBpO,EAAGwO,EAAOxO,EACVC,EAAGuO,EAAOvO,EACVmN,UAAWoB,EAAOpB,YAGpBiB,EAAgB7I,KAAK,IAChBgJ,EACHJ,GAAIG,KAGV,CAEA,GAAIF,EAAgB9P,OAAS,EAAG,CAC9B,MAAQjB,MAAOqR,SAAsBxR,EAASW,KAAK,QAAQ8Q,OAAOP,GAElE,GAAIM,EACF,MAAM,IAAIvU,MAAM,cAAcuU,EAAYT,UAE9C,CAEA,GAAII,EAAgB/P,OAAS,EAC3B,IAAK,MAAMiQ,KAAUF,EAAiB,CACpC,MAAQhR,MAAOuR,SAAsB1R,EAClCW,KAAK,QACLgR,OAAO,CACN9O,EAAGwO,EAAOxO,EACVC,EAAGuO,EAAOvO,EACVmN,UAAWoB,EAAOpB,YAEnBsB,GAAG,KAAMF,EAAOJ,IAEnB,GAAIS,EACF,MAAM,IAAIzU,MAAM,cAAcyU,EAAYX,UAE9C,OAGIjR,IAENzD,EAAciB,OAAQ,CACxB,CAAE,MAAO6C,GACPrB,EAAOuJ,KAAK,IACd,CAAE,QACAjN,EAASkC,OAAQ,CACnB,CAjN0B,GAoNtB1B,GAAaA,KACjB,IAAKqD,EAAiB3B,MAAO,OAC7B,MAAM2H,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAEhCZ,EAAoB+E,EAA0BxC,GAE9CmE,EAAe1B,EAAsBhF,EAAmB,EAAGE,GAEjExD,EAAM2B,QAAQ,CAACmB,EAAKmF,KACd+B,EAAa/B,KACfnF,EAAIK,EAAI6G,EAAa/B,GAAOnB,SAC5BhE,EAAIM,EAAI4G,EAAa/B,GAAOlB,SAC5BjE,EAAIgE,SAAWkD,EAAa/B,GAAOnB,SACnChE,EAAIiE,SAAWiD,EAAa/B,GAAOlB,YAIvC4C,MAGF/O,EAAAA,EAAAA,IAAY,KACVX,OAAOY,oBAAoB,SAAUN,GACrCJ,SAASU,oBAAoB,mBAAoBkU,GAC7CzU,GACFE,aAAaF,KAIjB,MAAM+B,GAAaA,KACjBM,EAAciB,OAAQ,EACtBwB,EAAOuJ,KAAK,YAGR5L,GAAqBA,KACzBJ,EAAciB,OAAQ,GAGlBsU,GAAgBtU,IACpB,MAAMuU,EAAYrI,EAAAA,IAAU,KAC5B,OAAOqI,EAAUvU,IAGbwU,IAA0BC,EAAAA,EAAAA,IAAS,IAChCH,GAAa/R,EAAevC,QAGrC,MAAO,CACL0B,gBACAC,mBACAC,eACAC,kBACAC,iBACAC,mBACAC,cACAC,gBACAC,eACAC,oBACAtE,iBACAC,WACAiB,gBACAwD,iBACAiS,2BACAhW,cACAL,iBACAG,cACAG,cACAU,sBAEJ,GIjyCJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,SCPI3D,MAAM,+F,GAGJ4B,IAAI,mBACJ5B,MAAM,UACNC,MAAA,oG,GAWA2B,IAAI,gBACJ5B,MAAM,iF,GAEDA,MAAM,U,GAGPA,MAAM,6F,GAGAA,MAAM,uC,GAYd4B,IAAI,mBACJ5B,MAAM,0E,IAED4B,IAAI,cAAc5B,MAAM,qD,IAEzBA,MAAM,4H,IAkBR4B,IAAI,gBACJ5B,MAAM,8F,IAGH4B,IAAI,eAAe5B,MAAM,qD,IAE1BA,MAAM,2J,mBAgBR4B,IAAI,eACJ5B,MAAM,8D,IAIN4B,IAAI,iBACJ5B,MAAM,8D,IAILA,MAAM,U,IAGPA,MAAM,yF,IAEDA,MAAM,mC,IACHA,MAAM,gC,UASAA,MAAM,oD,UAORA,MAAM,8D,IACjBA,MAAM,0BAA0BsD,KAAK,S,2CApH9CpD,EAAAA,EAAAA,IAwHM,MAxHNC,EAwHM,EArHJC,EAAAA,EAAAA,IAYO,MAZPC,EAYO,WACPD,EAAAA,EAAAA,IA0FM,MA1FNyB,EA0FM,EAtFJzB,EAAAA,EAAAA,IAeM,MAfN0B,EAeM,C,aAdJ1B,EAAAA,EAAAA,IAAiD,OAA5CJ,MAAM,iCAA+B,WAC1CI,EAAAA,EAAAA,IAWM,MAXN2B,EAWM,EARJ3B,EAAAA,EAAAA,IAOM,aANJA,EAAAA,EAAAA,IAEK,KAFL4B,GAEKkX,EAAAA,EAAAA,IADA9W,EAAA+W,aAAe,GAAG/W,EAAA+W,kBAAoB,WAAR,G,aAEnC/Y,EAAAA,EAAAA,IAEM,OAFDJ,MAAM,qCAAmC,EAC5CI,EAAAA,EAAAA,IAAmD,KAAhDJ,MAAM,yC,QAA0C,c,qBAIzDI,EAAAA,EAAAA,IAAiE,OAA5DJ,MAAM,iDAA+C,aAG5DI,EAAAA,EAAAA,IAsDM,MAtDN6B,EAsDM,EAlDJ7B,EAAAA,EAAAA,IAiBM,MAjBN8B,GAiBM,EAhBJ9B,EAAAA,EAAAA,IAeM,MAfNyC,GAeM,EAZJzC,EAAAA,EAAAA,IAWS,UAVPJ,MAAM,mFACLwC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAgX,QAAAhX,EAAAgX,UAAA1W,IACRE,KAAK,U,kBAELxC,EAAAA,EAAAA,IAIM,OAHJJ,MAAM,uGAAqG,EAE3GI,EAAAA,EAAAA,IAAiC,KAA9BJ,MAAM,wB,IAEXI,EAAAA,EAAAA,IAA8B,QAAxBJ,MAAM,QAAO,QAAI,U,MAK7BI,EAAAA,EAAAA,IAGO,MAHP2C,GAGO,WAEP3C,EAAAA,EAAAA,IAeM,MAfN8C,GAeM,EAdJ9C,EAAAA,EAAAA,IAaM,MAbN+C,GAaM,G,aAVJjD,EAAAA,EAAAA,IASSmZ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARQlX,EAAAiC,iBAAR7D,K,WADTN,EAAAA,EAAAA,IASS,UAPNqZ,IAAK/Y,EACNR,OAAKmC,EAAAA,EAAAA,IAAA,CAAC,6CAA4C,CAAAqX,OAChCpX,EAAA+W,eAAiB3Y,KAClCgC,QAAKiX,GAAErX,EAAAsX,gBAAgBlZ,GACxBoC,KAAK,W,QAEFpC,GAAI,GAAA4C,M,eAKbhD,EAAAA,EAAAA,IAGO,MAHPiD,GAGO,WAEPjD,EAAAA,EAAAA,IAGO,MAHPoD,GAGO,W,MAGTpD,EAAAA,EAAAA,IAYM,MAZNqD,GAYM,C,aAXJrD,EAAAA,EAAAA,IAAiD,OAA5CJ,MAAM,iCAA+B,WAC1CI,EAAAA,EAAAA,IAQM,MARNsD,GAQM,EALJtD,EAAAA,EAAAA,IAEM,MAFNuZ,GAEM,EADJvZ,EAAAA,EAAAA,IAA6E,OAA7EwZ,GAA2C,OAAGV,EAAAA,EAAAA,IAAG9W,EAAAyX,iBAAkB,MAAG,K,aAGxEzZ,EAAAA,EAAAA,IAAsD,OAAjDJ,MAAM,gCAA+B,UAAM,M,aAElDI,EAAAA,EAAAA,IAAiD,OAA5CJ,MAAM,iCAA+B,a,KAInCoC,EAAA0X,U,WAAX5Z,EAAAA,EAAAA,IAKM,MALN6Z,GAKM,IAAAtX,EAAA,KAAAA,EAAA,KAJJrC,EAAAA,EAAAA,IAEM,OAFDJ,MAAM,oCAAoCsD,KAAK,U,EAClDlD,EAAAA,EAAAA,IAA2C,QAArCJ,MAAM,mBAAkB,Y,IAEhCI,EAAAA,EAAAA,IAA+D,KAA5DJ,MAAM,0CAAyC,aAAS,S,eAGlDoC,EAAAiF,Q,WAAXnH,EAAAA,EAAAA,IAIM,MAJN8Z,GAIM,EAHJ5Z,EAAAA,EAAAA,IAEM,MAFN6Z,GAEM,C,aADJ7Z,EAAAA,EAAAA,IAAoD,KAAjDJ,MAAM,wCAAsC,U,eAAKI,EAAAA,EAAAA,IAAoB,cAAZ,OAAG,K,iBAAYgC,EAAAiF,OAAK,S,iBActF,QACE7G,KAAM,aACNE,KAAAA,GACE,MAAMsF,GAASC,EAAAA,EAAAA,MACTC,GAAgBtE,EAAAA,EAAAA,IAAI,MACpBuE,GAAmBvE,EAAAA,EAAAA,IAAI,MACvBwE,GAAexE,EAAAA,EAAAA,IAAI,MACnB0E,GAAiB1E,EAAAA,EAAAA,IAAI,MACrBsY,GAAmBtY,EAAAA,EAAAA,IAAI,MACvB4E,GAAc5E,EAAAA,EAAAA,IAAI,MAClB6E,GAAgB7E,EAAAA,EAAAA,IAAI,MACpB8E,GAAe9E,EAAAA,EAAAA,IAAI,MACnB+E,GAAoB/E,EAAAA,EAAAA,IAAI,GAC9B,IAAIkD,EAAM,KACN5D,EAAc,KAClB,MAAM4Y,GAAUlY,EAAAA,EAAAA,KAAI,GACdyF,GAAQzF,EAAAA,EAAAA,IAAI,MACZuY,GAAgBvY,EAAAA,EAAAA,IAAI,IACpBiY,GAAkBjY,EAAAA,EAAAA,IAAI,GACtBuX,GAAevX,EAAAA,EAAAA,IAAI,MACnBwY,GAAmBxY,EAAAA,EAAAA,IAAI,IAEvBmD,EAAS,CACbK,KAAMd,EAAe,mBACrBe,MAAOf,EAAe,oBACtBgB,IAAKhB,EAAe,kBACpBiB,MAAOjB,EAAe,oBACtB+V,OAAQ/V,EAAe,qBACvBgW,UAAWhW,EAAe,yBAC1BkB,eAAgBlB,EAAe,8BAC/BwE,SAAUxE,EAAe,yBAGrB6P,EAAc,CAClBa,GAAAA,CAAIxU,GACF,MAAMyU,EAASzU,EAAO,IAChB0U,EAAUnU,SAAS8T,OAAOM,MAAM,KACtC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAQ5M,OAAQ8M,IAAK,CACvC,IAAIP,EAASK,EAAQE,GACrB,MAA4B,MAArBP,EAAOQ,OAAO,GAAYR,EAASA,EAAO/B,UAAU,EAAG+B,EAAOvM,QACrE,GAA+B,IAA3BuM,EAAOxG,QAAQ4G,GACjB,OAAOK,mBAAmBT,EAAO/B,UAAUmC,EAAO3M,OAAQuM,EAAOvM,QAErE,CACA,OAAO,IACT,GAGIiS,EAAiBA,KACrB,MAAMC,EAAkB,IAAIC,IAE5B,IAAIC,EAAe,KACnB,MAAMxE,EAAqB/B,EAAYa,IAAI,gCAC3C,GAAIkB,EACF,IACE,MAAMC,EAASnD,KAAKoD,MAAMF,GACtBC,GAA4B,kBAAXA,IACnBuE,EAAevE,EAEnB,CAAE,MAAOtK,GACP6O,EAAe,IACjB,CAGFrW,EAAiBkE,QAAS/H,IACxB,MAAMma,EAAWD,IAAela,GAC1BsP,OACYtI,IAAhBmT,GAAU5Q,GAAmC,OAAhB4Q,GAAU5Q,EACnC4M,OAAOgE,EAAS5Q,GAChBoK,EAAYa,IAAI,sBAAsBxU,OACtCuP,OACYvI,IAAhBmT,GAAU3Q,GAAmC,OAAhB2Q,GAAU3Q,EACnC2M,OAAOgE,EAAS3Q,GAChBmK,EAAYa,IAAI,sBAAsBxU,OAG7B,OAAbsP,GACa,OAAbC,GACa,OAAbD,GACa,OAAbC,QACavI,IAAbsI,QACatI,IAAbuI,GAEAyK,EAAgBpG,IAAI5T,EAAM,CACxBA,KAAMA,EACNuJ,EAAG8M,WAAW/G,GACd9F,EAAG6M,WAAW9G,OAKpBqK,EAAiB5V,MAAQoP,MAAM/L,KAAK2S,EAAgBI,WAGhD3L,EAA6BxC,IAC5BA,GAAkBA,GAAkB,EAAU,EAC3B,GAAjBA,EAGHoO,EAAW5T,MAAOzG,EAAO,QAM7B,GALA2Z,EAAc3V,MAAQ,GAClB4B,EAAa5B,OACfkM,EAAAA,IAAUtK,EAAa5B,OAAOkL,UAAU,OAAOnC,UAG5CxJ,IAQH,OAPAsD,EAAM7C,MAAQ,iBACdsV,EAAQtV,OAAQ,EAChBqV,EAAgBrV,MAAQ,OAExBnD,WAAW,KACTkP,KACC,KAIL,IACE,MAAMrJ,EAAWhD,IAEX4W,EAAa,GACblT,EAAW,IACjB,IAAIC,EAAO,EACPC,GAAU,EACViT,EAAa,KAEjB,MAAOjT,EAAS,CACd,IAAIkT,EAAY9T,EAASW,KAAK,QAAQI,OAAO,IAAK,CAAEgT,MAAO,UAEvDza,IACFwa,EAAYA,EAAUvC,GAAG,OAAQjY,IAGnC,MACE2G,KAAMY,EACNV,MAAOW,EAAU,MACjBiT,SACQD,EACP7S,MAAM,YAAa,CAAEC,WAAW,IAChCC,MAAMR,EAAMA,EAAOD,EAAW,GAEjC,GAAII,EACF,MAAM,IAAI7D,MAAM,cAAc6D,EAAWiQ,WAG7B,OAAVgD,GAAiC,OAAfF,IACpBA,EAAaE,GAGXlT,GAAYA,EAASO,OAAS,GAChCwS,EAAWvL,QAAQxH,GACnBF,GAAQD,EAEJG,EAASO,OAASV,IACpBE,GAAU,IAGZA,GAAU,CAEd,CAEA,MAAMoT,EAAaJ,EAEnB,IAAKI,EAQH,OAPAf,EAAc3V,MAAQ,GACtBqV,EAAgBrV,MAAQ,EACxBsV,EAAQtV,OAAQ,EAChB+V,SACAlZ,WAAW,KACTkP,KACC,KAIL,MAAM4K,EAAcD,EAAWlN,OAAQxF,IACrC,MAAMuB,EAAI8M,WAAWrO,EAAKuB,GACpBC,EAAI6M,WAAWrO,EAAKwB,GAE1B,OACS,IAAPD,IACO,IAAPC,GACW,OAAXxB,EAAKuB,GACM,OAAXvB,EAAKwB,QACMxC,IAAXgB,EAAKuB,QACMvC,IAAXgB,EAAKwB,IACJoR,MAAMrR,KACNqR,MAAMpR,KAIXmQ,EAAc3V,MAAQ2W,EAEtBtB,EAAgBrV,MACC,OAAfuW,EAAsBA,EAAaG,EAAaA,EAAW5S,OAAS,CACxE,CAAE,MAAOM,GACPvB,EAAM7C,MAAQoE,EAAIqP,QAClB4B,EAAgBrV,MAAQ,CAC1B,CAAE,QACAsV,EAAQtV,OAAQ,EAEhB+V,IACAlZ,WAAW,KACTkP,KACC,IACL,GAGImJ,EAAmBlZ,IACnB2Y,EAAa3U,QAAUhE,GACzB2Y,EAAa3U,MAAQ,KAErB2V,EAAc3V,MAAQ,GACtBqV,EAAgBrV,MAAQ,EACxBsV,EAAQtV,OAAQ,EAEZ4B,EAAa5B,OACfkM,EAAAA,IAAUtK,EAAa5B,OAAOkL,UAAU,OAAOnC,SAGjDgN,IAEAlZ,WAAW,KACTkP,KACC,OAEH4I,EAAa3U,MAAQhE,EACrBsZ,EAAQtV,OAAQ,EAChBqW,EAAS1B,EAAa3U,SAIpB+L,EAAoBA,KACxB,IAAKnK,EAAa5B,QAAU2B,EAAiB3B,MAAO,OAEpDkM,EAAAA,IAAUtK,EAAa5B,OAAOkL,UAAU,OAAOnC,SAE/C,MAAMpB,EAAgBhG,EAAiB3B,MAAMgG,wBACvCiC,EAAiBN,EAActB,MAC/BT,EAAkB+B,EAAcrB,OAEhCZ,EAAoB+E,EAA0BxC,GAC9CkE,EAAa1B,EAA0BxC,GAC7C9F,EAAkBnC,MAAQmM,EAE1B,MAAMtG,EAAkB,EAElBnF,EAAoBuH,EAAiBvC,EAAoByG,EACzDxL,EAAqBiF,EAAkBC,EAEvCrF,EAAmBkF,EACnBjF,EAAkBoF,EAmBxB,GAjBAvF,EAAM4L,EAAAA,IACItK,EAAa5B,OACpBkB,OAAO,OACPE,KAAK,QAAS6G,GACd7G,KAAK,SAAUwE,GACfxE,KAAK,QAAS,yCACd3F,MAAM,iBAAkB,QAE3B4E,EAAuB,CACrBC,MACAC,SACAC,mBACAC,kBACAC,oBACAC,uBAGEgV,EAAc3V,MAAM8D,OAAS,EAAG,CAClC,MAAM+S,EAASlB,EAAc3V,MAAM0L,IAAK1H,IACtC,MAAMsH,EAAW+G,WAAWrO,EAAKuB,GAC3BgG,EAAW8G,WAAWrO,EAAKwB,GAE3BD,EAAI/E,EAAoB8K,EAAW,IAAO5K,EAC1C8E,EAAI/E,EAAmB8K,EAAW,IAAO5K,EAE/C,MAAO,CACL3E,KAAMgI,EAAKhI,KACXuJ,EAAGA,EACHC,EAAGA,EACH8F,SAAUA,EACVC,SAAUA,KAIRuL,EAAcxW,EAAIY,OAAO,KAAKE,KAAK,QAAS,eAClDyV,EAAO9S,QAASgT,IACdD,EACG5V,OAAO,UACPE,KAAK,KAAM2V,EAAMxR,GACjBnE,KAAK,KAAM2V,EAAMvR,GACjBpE,KAAK,IAAK,GACVA,KAAK,OAAQb,EAAO+D,UACpBlD,KAAK,UAAW,KAEvB,CAEA,GAAIsU,EAAiB1V,OAAS2B,EAAiB3B,QAC7C0V,EAAiB1V,MAAM8F,UAAY,GAE/B6O,EAAa3U,OAAS4V,EAAiB5V,MAAM8D,OAAS,GAAG,CAC3D,MAAMkT,EAAsBpB,EAAiB5V,MAAMwN,KAChDxJ,GAASA,EAAKhI,OAAS2Y,EAAa3U,OAGvC,GAAIgX,EAAqB,CACvB,MAAM1L,EAAW+G,WAAW2E,EAAoBzR,GAC1CgG,EAAW8G,WAAW2E,EAAoBxR,GAE1CyR,EAAazW,EAAoB8K,EAAW,IAAO5K,EACnDwW,EAAazW,EAAmB8K,EAAW,IAAO5K,EAElDoF,EAAcpE,EAAiB3B,MAAMgG,wBAErCT,EAAIQ,EAAYS,KAAOyQ,EACvBzR,EAAIO,EAAYU,IAAMyQ,EAEtBC,EAAW,GACXC,EAAaD,EAAW,EAExBE,EAAiB9a,SAAS2J,cAAc,OAC9CmR,EAAelR,UACb,qEACFkR,EAAe5b,MAAM+K,KAAUjB,EAAI6R,EAAP,KAC5BC,EAAe5b,MAAMgL,IAASjB,EAAI4R,EAAP,KAC3BC,EAAe5b,MAAM4K,MAAQ,GAAG8Q,MAChCE,EAAe5b,MAAM6K,OAAS,GAAG6Q,MACjCE,EAAejR,aAAa,YAAa4Q,EAAoBhb,MAE7D,MAAMsb,EAAc/a,SAAS2J,cAAc,KAC3CoR,EAAYnR,UAAY,sCACxBmR,EAAY7b,MAAM8b,SAAW,GAAGJ,MAEhCE,EAAerQ,YAAYsQ,GAC3B5B,EAAiB1V,MAAMgH,YAAYqQ,EACrC,CACF,GAIE1a,EAAeA,KACfD,GACFE,aAAaF,GAEfA,EAAcG,WAAW,MAClByY,EAAQtV,OAAS2V,EAAc3V,MAAM8D,OAAS,GACjDiI,KAED,MAGC6I,EAASA,KACbpT,EAAOuJ,KAAK,MA6Bd,OA1BAjO,EAAAA,EAAAA,IAAU,KACR,MAAM0a,EAAW7H,EAAYa,IAAI,yBAC5BgH,GAKLzB,IAEIlW,EAAiBiE,OAAS,GAC5B6Q,EAAa3U,MAAQH,EAAiB,GACtCyV,EAAQtV,OAAQ,EAChBqW,EAAS1B,EAAa3U,QAEtBsV,EAAQtV,OAAQ,EAElB3D,OAAOU,iBAAiB,SAAUJ,IAbhC6E,EAAOuJ,KAAK,QAgBhB/N,EAAAA,EAAAA,IAAY,KACVX,OAAOY,oBAAoB,SAAUN,GACjCD,GACFE,aAAaF,KAIV,CACLgF,gBACAC,mBACAC,eACAE,iBACA4T,mBACA1T,cACAC,gBACAC,eACAC,oBACAmT,UACAzS,QACA+R,SACA/U,iBAAgB,EAChB8U,eACAO,kBACAS,gBACAN,kBAEJ,GC7gBJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,UCLA,MAAMoC,GAAS,CACb,CACEC,KAAM,IACN1b,KAAM,OACN2b,UAAWC,GAEb,CACEF,KAAM,UACN1b,KAAM,SACN2b,UAAWE,KAITC,GAAcA,KAClB,GAAsB,qBAAXzb,OAAwB,CACjC,GACEA,OAAO6T,SAAS6H,SAASvY,SAAS,gBAClCnD,OAAO6T,SAAS6H,SAASvY,SAAS,eAElC,MAAO,IAET,GACEnD,OAAO6T,SAAS6H,SAASvY,SAAS,cACL,cAA7BnD,OAAO6T,SAAS6H,UACa,cAA7B1b,OAAO6T,SAAS6H,SAEhB,MAAO,sBAEX,CACA,MAAO,wBAGHvW,IAASwW,EAAAA,EAAAA,IAAa,CAC1BC,SAASC,EAAAA,EAAAA,IAAiBJ,MAC1BL,YAGFjW,GAAO2W,UAAWC,IACM,qBAAX/b,QAA0BA,OAAOgc,MAC1Chc,OAAOgc,KAAK,SAAU,eAAgB,CACpCC,UAAWF,EAAGG,aAKpB,U,OCpCA,MAAMC,IAAMC,EAAAA,EAAAA,IAAUC,GAEhBC,IAAQC,EAAAA,EAAAA,MAEdJ,GAAIK,IAAIrX,IAERgX,GAAIK,IAAIF,IAERH,GAAIM,MAAM,O,GCpBNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBjW,IAAjBkW,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,E,WCzBxB,IAAIG,EAAW,GACfR,EAAoBS,EAAI,SAASvI,EAAQwI,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASlJ,EAAI,EAAGA,EAAI4I,EAAS1V,OAAQ8M,IAAK,CACrC8I,EAAWF,EAAS5I,GAAG,GACvB+I,EAAKH,EAAS5I,GAAG,GACjBgJ,EAAWJ,EAAS5I,GAAG,GAE3B,IAJA,IAGImJ,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAS5V,OAAQkW,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAaK,OAAOC,KAAKlB,EAAoBS,GAAGU,MAAM,SAASpF,GAAO,OAAOiE,EAAoBS,EAAE1E,GAAK2E,EAASM,GAAK,GAChKN,EAASU,OAAOJ,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbP,EAASY,OAAOxJ,IAAK,GACrB,IAAIyJ,EAAIV,SACE3W,IAANqX,IAAiBnJ,EAASmJ,EAC/B,CACD,CACA,OAAOnJ,CArBP,CAJC0I,EAAWA,GAAY,EACvB,IAAI,IAAIhJ,EAAI4I,EAAS1V,OAAQ8M,EAAI,GAAK4I,EAAS5I,EAAI,GAAG,GAAKgJ,EAAUhJ,IAAK4I,EAAS5I,GAAK4I,EAAS5I,EAAI,GACrG4I,EAAS5I,GAAK,CAAC8I,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBsB,EAAI,SAASlB,GAChC,IAAImB,EAASnB,GAAUA,EAAOoB,WAC7B,WAAa,OAAOpB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoByB,EAAEF,EAAQ,CAAE7Q,EAAG6Q,IAC5BA,CACR,C,eCNAvB,EAAoByB,EAAI,SAAStB,EAASuB,GACzC,IAAI,IAAI3F,KAAO2F,EACX1B,EAAoB2B,EAAED,EAAY3F,KAASiE,EAAoB2B,EAAExB,EAASpE,IAC5EkF,OAAOW,eAAezB,EAASpE,EAAK,CAAE8F,YAAY,EAAMrK,IAAKkK,EAAW3F,IAG3E,C,eCPAiE,EAAoB8B,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAO9J,MAAQ,IAAI+J,SAAS,cAAb,EAChB,CAAE,MAAO3T,GACR,GAAsB,kBAAXhL,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxB2c,EAAoB2B,EAAI,SAASM,EAAKC,GAAQ,OAAOjB,OAAOkB,UAAUC,eAAe9B,KAAK2B,EAAKC,EAAO,C,eCCtGlC,EAAoBqB,EAAI,SAASlB,GACX,qBAAXkC,QAA0BA,OAAOC,aAC1CrB,OAAOW,eAAezB,EAASkC,OAAOC,YAAa,CAAEtb,MAAO,WAE7Dia,OAAOW,eAAezB,EAAS,aAAc,CAAEnZ,OAAO,GACvD,C,eCDA,IAAIub,EAAkB,CACrB,IAAK,GAaNvC,EAAoBS,EAAEO,EAAI,SAASwB,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4B/Y,GAC/D,IAKIsW,EAAUuC,EALV9B,EAAW/W,EAAK,GAChBgZ,EAAchZ,EAAK,GACnBiZ,EAAUjZ,EAAK,GAGIiO,EAAI,EAC3B,GAAG8I,EAAS9N,KAAK,SAAS+H,GAAM,OAA+B,IAAxB4H,EAAgB5H,EAAW,GAAI,CACrE,IAAIsF,KAAY0C,EACZ3C,EAAoB2B,EAAEgB,EAAa1C,KACrCD,EAAoBO,EAAEN,GAAY0C,EAAY1C,IAGhD,GAAG2C,EAAS,IAAI1K,EAAS0K,EAAQ5C,EAClC,CAEA,IADG0C,GAA4BA,EAA2B/Y,GACrDiO,EAAI8I,EAAS5V,OAAQ8M,IACzB4K,EAAU9B,EAAS9I,GAChBoI,EAAoB2B,EAAEY,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOxC,EAAoBS,EAAEvI,EAC9B,EAEI2K,EAAqBC,KAAK,kCAAoCA,KAAK,mCAAqC,GAC5GD,EAAmB9X,QAAQ0X,EAAqBM,KAAK,KAAM,IAC3DF,EAAmB9Q,KAAO0Q,EAAqBM,KAAK,KAAMF,EAAmB9Q,KAAKgR,KAAKF,G,IC/CvF,IAAIG,EAAsBhD,EAAoBS,OAAEzW,EAAW,CAAC,KAAM,WAAa,OAAOgW,EAAoB,KAAO,GACjHgD,EAAsBhD,EAAoBS,EAAEuC,E","sources":["webpack://political-spectrum/./src/App.vue","webpack://political-spectrum/./src/App.vue?7ccd","webpack://political-spectrum/./src/views/HomeView.vue","webpack://political-spectrum/./src/config/supabase.js","webpack://political-spectrum/./src/config/constants.js","webpack://political-spectrum/./src/utils/utils.js","webpack://political-spectrum/./src/views/HomeView.vue?1da1","webpack://political-spectrum/./src/views/ResultView.vue","webpack://political-spectrum/./src/views/ResultView.vue?1b2a","webpack://political-spectrum/./src/router/index.js","webpack://political-spectrum/./src/main.js","webpack://political-spectrum/webpack/bootstrap","webpack://political-spectrum/webpack/runtime/chunk loaded","webpack://political-spectrum/webpack/runtime/compat get default export","webpack://political-spectrum/webpack/runtime/define property getters","webpack://political-spectrum/webpack/runtime/global","webpack://political-spectrum/webpack/runtime/hasOwnProperty shorthand","webpack://political-spectrum/webpack/runtime/make namespace object","webpack://political-spectrum/webpack/runtime/jsonp chunk loading","webpack://political-spectrum/webpack/startup"],"sourcesContent":["<script>\n  import { onMounted, onUnmounted } from 'vue';\n\n  export default {\n    name: 'App',\n\n    components: {},\n\n    setup() {\n      const setViewportHeight = () => {\n        const vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty('--vh', `${vh}px`);\n      };\n\n      let resizeTimer = null;\n      const handleResize = () => {\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n        resizeTimer = setTimeout(() => {\n          setViewportHeight();\n        }, 100);\n      };\n\n      onMounted(() => {\n        setViewportHeight();\n\n        window.addEventListener('resize', handleResize);\n\n        window.addEventListener('orientationchange', setViewportHeight);\n\n        document.addEventListener('visibilitychange', setViewportHeight);\n      });\n\n      onUnmounted(() => {\n        window.removeEventListener('resize', handleResize);\n        window.removeEventListener('orientationchange', setViewportHeight);\n        document.addEventListener('visibilitychange', setViewportHeight);\n      });\n\n      return {\n      };\n    },\n  };\n</script>\n\n<template>\n  <div class=\"app-root d-flex flex-column\" style=\"height: calc(var(--vh, 1vh) * 100); overflow: hidden\">\n    <div class=\"d-flex flex-column overflow-hidden\" style=\"flex: 1; min-height: 0\">\n      <router-view />\n    </div>\n  </div>\n</template>\n\n<style>\n  @import './assets/css/common.css';\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=29bb7e4a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=29bb7e4a&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div\n    class=\"d-flex flex-column align-items-center m-0 p-0 w-100 h-100 overflow-hidden position-relative\"\n  >\n    <div\n      ref=\"nametagContainer\"\n      class=\"pe-none\"\n      style=\"\n        position: fixed;\n        z-index: 10000;\n        pointer-events: none;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      \"\n    ></div>\n    <div\n      ref=\"mainContainer\"\n      class=\"col-12 col-md-10 d-flex flex-column position-relative h-100 overflow-x-hidden\"\n    >\n      <div class=\"d-flex\">\n        <div class=\"d-none d-md-block my-width-20\"></div>\n        <div\n          class=\"text-center text-md-start d-flex flex-column justify-content-center py-3 my-title-content\"\n        >\n          <div>\n            <h1 class=\"mb-0 my-text-lg my-color-light-gray\">政治人物光譜</h1>\n            <div class=\"my-text-sm my-text-dark-gray pt-3\">\n              把名字拖曳到最適合的顏色位置，上傳後看結果唷！\n            </div>\n          </div>\n        </div>\n        <div class=\"d-none d-md-block my-side-section my-width-20\"></div>\n      </div>\n\n      <div\n        ref=\"contentContainer\"\n        class=\"d-flex position-relative min-h-0 overflow-hidden my-flex-1-1-0\"\n      >\n        <div ref=\"leftSection\" class=\"my-side-section position-relative z-1 my-width-20\"></div>\n\n        <div\n          ref=\"centerSection\"\n          class=\"flex-grow-1 my-flex-grow-1 position-relative min-w-0 min-h-0 overflow-hidden my-flex-1-1-0\"\n        ></div>\n\n        <div ref=\"rightSection\" class=\"my-side-section position-relative z-3 my-width-20\">\n          <div\n            class=\"d-flex flex-column gap-2 align-items-start justify-content-center position-absolute top-0 start-0 end-0 bottom-0 ps-2 pe-0\"\n          >\n            <button\n              class=\"btn my-button rounded px-2 py-1\"\n              :class=\"{ 'cursor-not-allowed': !confirmEnabled || isSaving }\"\n              :disabled=\"!confirmEnabled || isSaving\"\n              @click=\"saveToSupabase\"\n              type=\"button\"\n            >\n              確定送出\n            </button>\n            <button\n              class=\"btn my-button my-text-sm rounded px-2 py-1\"\n              :class=\"{ 'cursor-not-allowed': isSaving }\"\n              :disabled=\"isSaving\"\n              @click=\"resetBoxes\"\n              type=\"button\"\n            >\n              全部重設\n            </button>\n            <button\n              class=\"btn my-button rounded px-2 py-1\"\n              :class=\"{ 'cursor-not-allowed': !hasCookieId }\"\n              :disabled=\"!hasCookieId\"\n              @click=\"goToResult\"\n              type=\"button\"\n            >\n              查看結果\n            </button>\n          </div>\n        </div>\n\n        <div\n          ref=\"svgContainer\"\n          class=\"position-absolute top-0 start-0 end-0 bottom-0 z-2 pe-none\"\n        ></div>\n\n        <div\n          ref=\"boxesContainer\"\n          class=\"position-absolute top-0 start-0 end-0 bottom-0 z-3 pe-none\"\n        ></div>\n      </div>\n\n      <div class=\"d-flex\">\n        <div class=\"d-none d-md-block my-width-20\"></div>\n        <div\n          class=\"d-flex justify-content-end align-items-center py-2 px-2 px-md-0 my-footer-content\"\n        >\n          <div class=\"my-text-sm my-text-dark-gray\">szfftz</div>\n        </div>\n        <div class=\"d-none d-md-block my-width-20\"></div>\n      </div>\n    </div>\n\n    <div v-if=\"isSaving\" class=\"my-loading-overlay text-center my-text-dark-gray\">\n      <div class=\"spinner-border mb-3 my-spinner-lg\" role=\"status\">\n        <span class=\"visually-hidden\">上傳中...</span>\n      </div>\n      <p class=\"mt-3 mb-0 my-text-sm my-text-dark-gray\">上傳中</p>\n    </div>\n\n    <div v-if=\"isSaveSuccess\" class=\"my-loading-overlay text-center my-text-dark-gray\">\n      <div class=\"d-flex flex-column align-items-center gap-2\">\n        <h2 class=\"mb-4 my-text-lg my-text-dark-gray\">上傳成功！</h2>\n        <div class=\"d-flex flex-column gap-2 align-items-center\">\n          <button class=\"btn my-button rounded px-2 py-1\" @click=\"closeSuccessDialog\" type=\"button\">\n            確定\n          </button>\n          <button class=\"btn my-button rounded px-2 py-1\" @click=\"goToResult\" type=\"button\">\n            查看結果\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue';\n  import { useRouter } from 'vue-router';\n  import * as d3 from 'd3';\n  import { getSupabaseClient, isConfigured } from '../config/supabase.js';\n  import { POLITICIAN_NAMES } from '../config/constants.js';\n  import { getCSSVariable, createGradientSpectrum } from '../utils/utils.js';\n\n  export default {\n    name: 'HomeView',\n    setup() {\n      const router = useRouter();\n      const mainContainer = ref(null);\n      const contentContainer = ref(null);\n      const svgContainer = ref(null);\n      const buttonContainer = ref(null);\n      const boxesContainer = ref(null);\n      const nametagContainer = ref(null);\n      const leftSection = ref(null);\n      const centerSection = ref(null);\n      const rightSection = ref(null);\n      const rightSectionWidth = ref(0);\n      let svg = null;\n      let resizeTimer = null;\n      let boxes = [];\n      let linesGroup = null;\n      const confirmEnabled = ref(true);\n      const totalNames = ref(0);\n      const totalCookieIds = ref(0);\n\n      const loadTotalCookieIds = async () => {\n        if (!isConfigured()) {\n          totalCookieIds.value = 0;\n          return;\n        }\n\n        try {\n          const supabase = getSupabaseClient();\n\n          try {\n            const { data: rpcData, error: rpcError } = await supabase.rpc(\n              'count_distinct_cookie_ids'\n            );\n\n            if (!rpcError && rpcData !== null && rpcData !== undefined) {\n              totalCookieIds.value = rpcData;\n              return;\n            }\n          } catch (rpcErr) {\n            return;\n          }\n\n          const uniqueCookieIds = new Set();\n          const pageSize = 1000;\n          let from = 0;\n          let hasMore = true;\n\n          while (hasMore) {\n            const { data: pageData, error: queryError } = await supabase\n              .from('data')\n              .select('cookie_id')\n              .not('cookie_id', 'is', null)\n              .order('id', { ascending: true })\n              .range(from, from + pageSize - 1);\n\n            if (queryError) {\n              totalCookieIds.value = 0;\n              return;\n            }\n\n            if (pageData && pageData.length > 0) {\n              pageData.forEach((item) => {\n                if (item.cookie_id !== null && item.cookie_id !== undefined) {\n                  uniqueCookieIds.add(item.cookie_id);\n                }\n              });\n\n              from += pageSize;\n\n              if (pageData.length < pageSize) {\n                hasMore = false;\n              }\n            } else {\n              hasMore = false;\n            }\n          }\n\n          totalCookieIds.value = uniqueCookieIds.size;\n        } catch (err) {\n          totalCookieIds.value = 0;\n        }\n      };\n\n      // 获取颜色的函数，确保每次调用时都重新获取最新的CSS变量值\n      const getColors = () => {\n        return {\n          blue: getCSSVariable('--my-color-blue'),\n          green: getCSSVariable('--my-color-green'),\n          red: getCSSVariable('--my-color-red'),\n          white: getCSSVariable('--my-color-white'),\n          backgroundGray: getCSSVariable('--my-color-background-gray'),\n          darkGray: getCSSVariable('--my-color-dark-gray'),\n        };\n      };\n\n      const tagWidth = 60;\n\n      const boxWidth = tagWidth * (4 / 3);\n      const boxHeight = 30;\n      let prevWidth = 0;\n      let prevHeight = 0;\n      let prevFirstSectionWidth = 0;\n      let prevThirdSectionWidth = 0;\n      const isSaving = ref(false);\n      const isSaveSuccess = ref(false);\n      const currentUniqueId = ref(null);\n      const createdAt = ref(null);\n      const updatedAt = ref(null);\n      const hasCookieId = ref(false);\n\n      const isTextInGradientArea = (\n        box,\n        grayAreaLeft,\n        grayAreaTop,\n        grayAreaRight,\n        grayAreaBottom\n      ) => {\n        return (\n          box.x >= grayAreaLeft &&\n          box.x <= grayAreaRight &&\n          box.y >= grayAreaTop &&\n          box.y <= grayAreaBottom\n        );\n      };\n\n      const initHTMLBoxes = (\n        firstSectionWidth,\n        gradientAreaWidth,\n        gradientAreaHeight,\n        thirdSectionWidth,\n        containerHeight\n      ) => {\n        if (!mainContainer.value || !contentContainer.value) return;\n\n        const titleAreaHeight = 0;\n\n        const grayAreaLeft = firstSectionWidth;\n        const grayAreaTop = titleAreaHeight;\n        const grayAreaRight = grayAreaLeft + gradientAreaWidth;\n        const grayAreaBottom = grayAreaTop + gradientAreaHeight;\n\n        if (nametagContainer.value) {\n          nametagContainer.value.innerHTML = '';\n        }\n\n        const contentRect = contentContainer.value.getBoundingClientRect();\n\n        boxes.forEach((box) => {\n          const boxElement = document.createElement('div');\n          boxElement.className =\n            'my-name-box cursor-grab position-absolute d-flex align-items-center justify-content-center text-dark user-select-none bg-transparent border-0';\n          boxElement.setAttribute('data-name', box.name);\n\n          boxElement.style.width = `${boxWidth}px`;\n          boxElement.style.height = `${boxHeight}px`;\n          boxElement.style.pointerEvents = 'auto';\n\n          const x = contentRect.left + box.x;\n          const y = contentRect.top + box.y;\n\n          const translateX = -boxWidth / 2;\n          const translateY = -boxHeight / 2;\n          boxElement.style.transform = `translate(${translateX}px, ${translateY}px)`;\n          boxElement.style.left = `${x}px`;\n          boxElement.style.top = `${y}px`;\n\n          const textContainer = document.createElement('div');\n          textContainer.className =\n            'position-relative d-inline-block px-2 py-1 rounded bg-transparent';\n\n          const textElement = document.createElement('span');\n          textElement.className = 'my-name-box-text position-relative lh-1 text-nowrap';\n          textElement.textContent = box.name;\n\n          textContainer.appendChild(textElement);\n          boxElement.appendChild(textContainer);\n\n          let isDragging = false;\n          let currentBox = box;\n          let animationFrameId = null;\n\n          const handleMove = (e) => {\n            if (!isDragging || currentBox !== box || !contentContainer.value) return;\n\n            if (e?.type?.startsWith?.('touch') && e.cancelable) {\n              e.preventDefault();\n            }\n\n            if (animationFrameId) {\n              cancelAnimationFrame(animationFrameId);\n            }\n\n            animationFrameId = requestAnimationFrame(() => {\n              const containerRect = contentContainer.value.getBoundingClientRect();\n              let clientX, clientY;\n\n              if (e.type.startsWith('touch')) {\n                const touch = e.touches[0] || e.changedTouches[0];\n                clientX = touch.clientX - containerRect.left;\n                clientY = touch.clientY - containerRect.top;\n              } else {\n                clientX = e.clientX - containerRect.left;\n                clientY = e.clientY - containerRect.top;\n              }\n\n              const containerWidth = containerRect.width;\n              const containerHeight = containerRect.height;\n              const minX = 0;\n              const maxX = containerWidth;\n              const minY = 0;\n              const maxY = containerHeight;\n\n              const constrainedX = Math.max(minX, Math.min(maxX, clientX));\n              const constrainedY = Math.max(minY, Math.min(maxY, clientY));\n\n              box.x = constrainedX;\n              box.y = constrainedY;\n\n              const x = containerRect.left + constrainedX;\n              const y = containerRect.top + constrainedY;\n              const translateX = -boxWidth / 2;\n              const translateY = -boxHeight / 2;\n              boxElement.style.transform = `translate(${translateX}px, ${translateY}px)`;\n              boxElement.style.left = `${x}px`;\n              boxElement.style.top = `${y}px`;\n\n              updateCoordinates();\n            });\n          };\n\n          const handleEnd = () => {\n            if (!isDragging || currentBox !== box) return;\n            isDragging = false;\n            boxElement.style.zIndex = '1';\n            boxElement.classList.remove('my-dragging');\n\n            if (animationFrameId) {\n              cancelAnimationFrame(animationFrameId);\n              animationFrameId = null;\n            }\n\n            const isInGrayArea = isTextInGradientArea(\n              box,\n              grayAreaLeft,\n              grayAreaTop,\n              grayAreaRight,\n              grayAreaBottom\n            );\n\n            if (!isInGrayArea) {\n              if (box.x < firstSectionWidth) {\n                rearrangeWhiteAreaBoxes(firstSectionWidth, containerHeight);\n              } else {\n                boxElement.classList.add('my-smooth-transition');\n\n                box.x = box.defaultX;\n                box.y = box.defaultY;\n\n                const containerRect = contentContainer.value.getBoundingClientRect();\n                const x = containerRect.left + box.x;\n                const y = containerRect.top + box.y;\n                const translateX = -boxWidth / 2;\n                const translateY = -boxHeight / 2;\n                boxElement.style.transform = `translate(${translateX}px, ${translateY}px)`;\n                boxElement.style.left = `${x}px`;\n                boxElement.style.top = `${y}px`;\n\n                setTimeout(() => {\n                  boxElement.classList.remove('my-smooth-transition');\n                }, 300);\n\n                rearrangeWhiteAreaBoxes(firstSectionWidth, containerHeight);\n              }\n            } else {\n              rearrangeWhiteAreaBoxes(firstSectionWidth, containerHeight);\n            }\n\n            updateCoordinates();\n\n            document.removeEventListener('mousemove', handleMove);\n            document.removeEventListener('mouseup', handleEnd);\n            document.removeEventListener('touchmove', handleMove);\n            document.removeEventListener('touchend', handleEnd);\n            document.removeEventListener('touchcancel', handleEnd);\n          };\n\n          const handleStart = (e) => {\n            isDragging = true;\n            currentBox = box;\n            boxElement.style.zIndex = '1000';\n            boxElement.classList.add('my-dragging');\n\n            document.addEventListener('mousemove', handleMove);\n            document.addEventListener('mouseup', handleEnd);\n            document.addEventListener('touchmove', handleMove, { passive: false });\n            document.addEventListener('touchend', handleEnd);\n\n            document.addEventListener('touchcancel', handleEnd);\n\n            e.preventDefault();\n          };\n\n          boxElement.addEventListener('mousedown', handleStart);\n          boxElement.addEventListener('touchstart', handleStart, { passive: false });\n\n          if (nametagContainer.value) {\n            nametagContainer.value.appendChild(boxElement);\n          }\n        });\n\n        rearrangeWhiteAreaBoxes(firstSectionWidth, containerHeight);\n      };\n\n      const rearrangeWhiteAreaBoxes = (whiteAreaWidth, containerHeight) => {\n        if (!nametagContainer.value || !contentContainer.value) return;\n\n        let whiteAreaBoxes = boxes\n          .filter((box) => box.x < whiteAreaWidth)\n          .sort((a, b) => {\n            const indexA = POLITICIAN_NAMES.indexOf(a.name);\n            const indexB = POLITICIAN_NAMES.indexOf(b.name);\n            return indexA - indexB;\n          });\n\n        if (whiteAreaBoxes.length === 0) return;\n\n        const titleAreaHeight = 0;\n\n        const itemHeight = boxHeight + 20;\n        const totalHeight = whiteAreaBoxes.length * itemHeight - 20;\n\n        const gradientAreaHeight = containerHeight - titleAreaHeight;\n\n        const centerStartY =\n          titleAreaHeight + (gradientAreaHeight - totalHeight) / 2 + boxHeight / 2;\n        const startY = Math.max(titleAreaHeight + boxHeight / 2, centerStartY);\n\n        const rightPadding = 10;\n        const rightX = whiteAreaWidth - boxWidth / 2 - rightPadding;\n\n        whiteAreaBoxes.forEach((box, index) => {\n          const newX = rightX;\n          const newY = startY + index * itemHeight;\n\n          box.x = newX;\n          box.y = newY;\n          box.defaultX = newX;\n          box.defaultY = newY;\n        });\n\n        const contentRect = contentContainer.value.getBoundingClientRect();\n\n        if (nametagContainer.value) {\n          boxes.forEach((box) => {\n            const boxElement = nametagContainer.value.querySelector(`[data-name=\"${box.name}\"]`);\n            if (boxElement) {\n              boxElement.classList.add('my-smooth-transition');\n\n              const x = contentRect.left + box.x;\n              const y = contentRect.top + box.y;\n              const translateX = -boxWidth / 2;\n              const translateY = -boxHeight / 2;\n              boxElement.style.transform = `translate(${translateX}px, ${translateY}px)`;\n              boxElement.style.left = `${x}px`;\n              boxElement.style.top = `${y}px`;\n\n              setTimeout(() => {\n                boxElement.classList.remove('my-smooth-transition');\n              }, 300);\n            }\n          });\n        }\n      };\n\n      const calculateSideSectionWidth = (containerWidth) => {\n        if (!containerWidth || containerWidth <= 0) return 0;\n        return containerWidth * 0.2;\n      };\n\n      const calculateBoxPositions = (areaWidth, areaLeft = 0, containerHeight = null) => {\n        const positions = [];\n        const itemHeight = boxHeight + 20;\n\n        const names = POLITICIAN_NAMES;\n\n        const totalHeight = names.length * itemHeight - 20;\n\n        let startY = boxHeight / 2;\n        if (containerHeight) {\n          const centerStartY = (containerHeight - totalHeight) / 2 + boxHeight / 2;\n          startY = Math.max(boxHeight / 2, centerStartY);\n        }\n\n        const rightPadding = 10;\n        const rightX = areaLeft + areaWidth - boxWidth / 2 - rightPadding;\n\n        names.forEach((name, index) => {\n          const x = rightX;\n          const y = startY + index * itemHeight;\n\n          positions.push({\n            x,\n            y,\n            defaultX: x,\n            defaultY: y,\n            name,\n          });\n        });\n\n        return positions;\n      };\n\n      const updateCoordinates = () => {\n        if (!linesGroup || !svg || !svgContainer.value) return;\n\n        if (!contentContainer.value) return;\n        const containerRect = contentContainer.value.getBoundingClientRect();\n        const containerHeight = containerRect.height;\n        const containerWidth = containerRect.width;\n\n        const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n        const thirdSectionWidth = calculateSideSectionWidth(containerWidth);\n        rightSectionWidth.value = thirdSectionWidth;\n\n        const titleAreaHeight = 0;\n\n        const grayAreaWidth = containerWidth - firstSectionWidth - thirdSectionWidth;\n        const grayAreaHeight = containerHeight - titleAreaHeight;\n\n        const grayAreaLeft = firstSectionWidth;\n        const grayAreaTop = titleAreaHeight;\n        const grayAreaRight = grayAreaLeft + grayAreaWidth;\n        const grayAreaBottom = grayAreaTop + grayAreaHeight;\n\n        linesGroup.selectAll('*').remove();\n\n        const displayList = [];\n        boxes.forEach((box, index) => {\n          const isInGrayArea = isTextInGradientArea(\n            box,\n            grayAreaLeft,\n            grayAreaTop,\n            grayAreaRight,\n            grayAreaBottom\n          );\n\n          if (isInGrayArea) {\n            const relativeX = box.x - grayAreaLeft;\n            const relativeY = box.y - grayAreaTop;\n            const xPercent = Math.max(0, Math.min(100, (relativeX / grayAreaWidth) * 100));\n            const yPercent = Math.max(0, Math.min(100, (relativeY / grayAreaHeight) * 100));\n            displayList.push({\n              name: box.name || `方塊 ${index + 1}`,\n              x: box.x,\n              y: box.y,\n              xPercent: Math.round(xPercent * 100) / 100,\n              yPercent: Math.round(yPercent * 100) / 100,\n            });\n          }\n        });\n\n        const namesInGradientArea = displayList.map((item) => item.name);\n\n        const hasNameNotInGradient = POLITICIAN_NAMES.some(\n          (name) => !namesInGradientArea.includes(name)\n        );\n        const nextConfirmEnabled = !hasNameNotInGradient;\n        const prevConfirmEnabled = confirmEnabled.value;\n        confirmEnabled.value = nextConfirmEnabled;\n\n        if (\n          !nextConfirmEnabled &&\n          (prevConfirmEnabled !== nextConfirmEnabled || namesInGradientArea.length)\n        ) {\n          return;\n        }\n\n        displayList.sort((a, b) => a.xPercent - b.xPercent);\n      };\n\n      const drawVisualization = () => {\n        if (!svgContainer.value || !contentContainer.value) return;\n\n        // 验证颜色是否已正确加载\n        const currentColors = getColors();\n        const hasValidColors =\n          currentColors.blue &&\n          currentColors.green &&\n          currentColors.red &&\n          currentColors.white &&\n          currentColors.backgroundGray;\n\n        // 如果颜色未加载，延迟重试\n        if (!hasValidColors) {\n          requestAnimationFrame(() => {\n            setTimeout(() => {\n              drawVisualization();\n            }, 50);\n          });\n          return;\n        }\n\n        d3.select(svgContainer.value).selectAll('svg').remove();\n\n        const containerRect = contentContainer.value.getBoundingClientRect();\n        const containerWidth = containerRect.width;\n        const containerHeight = containerRect.height;\n\n        // 确保容器有有效的尺寸\n        if (containerWidth <= 0 || containerHeight <= 0) {\n          requestAnimationFrame(() => {\n            drawVisualization();\n          });\n          return;\n        }\n\n        const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n        const rightWidth = calculateSideSectionWidth(containerWidth);\n        rightSectionWidth.value = rightWidth;\n\n        const titleAreaHeight = 0;\n\n        const gradientAreaWidth = containerWidth - firstSectionWidth - rightWidth;\n        const gradientAreaHeight = containerHeight - titleAreaHeight;\n\n        const gradientAreaLeft = firstSectionWidth;\n        const gradientAreaTop = titleAreaHeight;\n\n        svg = d3\n          .select(svgContainer.value)\n          .append('svg')\n          .attr('width', containerWidth)\n          .attr('height', containerHeight)\n          .attr('class', 'd-block position-relative w-100 h-100')\n          .style('pointer-events', 'none');\n\n        // 在渲染时动态获取颜色，确保CSS变量已加载\n        createGradientSpectrum({\n          svg,\n          colors: currentColors,\n          gradientAreaLeft,\n          gradientAreaTop,\n          gradientAreaWidth,\n          gradientAreaHeight,\n        });\n\n        linesGroup = svg.append('g').attr('class', 'position-lines');\n\n        totalNames.value = POLITICIAN_NAMES.length;\n\n        if (boxes.length === 0) {\n          boxes = calculateBoxPositions(firstSectionWidth, 0, containerHeight);\n        } else {\n          const newPositions = calculateBoxPositions(firstSectionWidth, 0, containerHeight);\n          boxes = newPositions.map((newPos, index) => {\n            const existing = boxes[index];\n            return {\n              ...existing,\n              x: existing ? existing.x : newPos.x,\n              y: existing ? existing.y : newPos.y,\n              defaultX: existing && existing.defaultX ? existing.defaultX : newPos.defaultX,\n              defaultY: existing && existing.defaultY ? existing.defaultY : newPos.defaultY,\n              name: newPos.name,\n            };\n          });\n        }\n\n        initHTMLBoxes(\n          firstSectionWidth,\n          gradientAreaWidth,\n          gradientAreaHeight,\n          rightWidth,\n          containerHeight\n        );\n\n        requestAnimationFrame(() => {\n          updateCoordinates();\n        });\n\n        if (contentContainer.value) {\n          const containerRect = contentContainer.value.getBoundingClientRect();\n          prevWidth = containerRect.width;\n          prevHeight = containerRect.height;\n          prevFirstSectionWidth = firstSectionWidth;\n          prevThirdSectionWidth = rightWidth;\n        }\n      };\n\n      const handleResize = () => {\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n        resizeTimer = setTimeout(() => {\n          if (!contentContainer.value) return;\n          const containerRect = contentContainer.value.getBoundingClientRect();\n          const newWidth = containerRect.width;\n          const newHeight = containerRect.height;\n\n          const newFirstSectionWidth = calculateSideSectionWidth(newWidth);\n          const newThirdSectionWidth = calculateSideSectionWidth(newWidth);\n\n          const newGrayAreaWidth = newWidth - newFirstSectionWidth - newThirdSectionWidth;\n          const newGrayAreaHeight = newHeight;\n\n          const newGrayAreaLeft = newFirstSectionWidth;\n          const newGrayAreaTop = 0;\n          const newGrayAreaRight = newGrayAreaLeft + newGrayAreaWidth;\n          const newGrayAreaBottom = newGrayAreaTop + newGrayAreaHeight;\n\n          const scaleX = newWidth / prevWidth;\n          const scaleY = newHeight / prevHeight;\n\n          boxes = boxes.map((box) => {\n            const wasInTemporaryArea = prevFirstSectionWidth > 0 && box.x < prevFirstSectionWidth;\n\n            let newX, newY, newDefaultX, newDefaultY;\n\n            if (wasInTemporaryArea) {\n              const relativeX =\n                prevFirstSectionWidth > 0 ? box.defaultX / prevFirstSectionWidth : 0.5;\n              newX = Math.max(0, Math.min(newFirstSectionWidth, newFirstSectionWidth * relativeX));\n\n              newY = Math.max(0, Math.min(newHeight, box.y * scaleY));\n\n              const tempPositions = calculateBoxPositions(newFirstSectionWidth, 0, newHeight);\n              const tempPos = tempPositions.find((p) => p.name === box.name);\n              if (tempPos) {\n                newDefaultX = tempPos.defaultX;\n                newDefaultY = tempPos.defaultY;\n              } else {\n                newDefaultX = newX;\n                newDefaultY = newY;\n              }\n            } else {\n              const prevGrayAreaWidth = prevWidth - prevFirstSectionWidth - prevThirdSectionWidth;\n              const prevGrayAreaHeight = prevHeight;\n              const prevGrayAreaLeft = prevFirstSectionWidth;\n              const prevGrayAreaTop = 0;\n\n              if (prevGrayAreaWidth > 0 && prevGrayAreaHeight > 0) {\n                const relativeX = (box.x - prevGrayAreaLeft) / prevGrayAreaWidth;\n                const relativeY = (box.y - prevGrayAreaTop) / prevGrayAreaHeight;\n\n                const clampedRelativeX = Math.max(0, Math.min(1, relativeX));\n                const clampedRelativeY = Math.max(0, Math.min(1, relativeY));\n\n                newX = newGrayAreaLeft + clampedRelativeX * newGrayAreaWidth;\n                newY = newGrayAreaTop + clampedRelativeY * newGrayAreaHeight;\n\n                const minX = newGrayAreaLeft;\n                const maxX = newGrayAreaRight;\n                const minY = newGrayAreaTop;\n                const maxY = newGrayAreaBottom;\n                newX = Math.max(minX, Math.min(maxX, newX));\n                newY = Math.max(minY, Math.min(maxY, newY));\n              } else {\n                newX = box.x * scaleX;\n                newY = box.y * scaleY;\n              }\n\n              const tempPositions = calculateBoxPositions(newFirstSectionWidth, 0, newHeight);\n              const tempPos = tempPositions.find((p) => p.name === box.name);\n              if (tempPos) {\n                newDefaultX = tempPos.defaultX;\n                newDefaultY = tempPos.defaultY;\n              } else {\n                newDefaultX = Math.max(0, Math.min(newFirstSectionWidth, box.defaultX));\n                newDefaultY = box.defaultY * scaleY;\n              }\n            }\n\n            return {\n              ...box,\n              x: newX,\n              y: newY,\n              defaultX: newDefaultX,\n              defaultY: newDefaultY,\n            };\n          });\n\n          if (svg) {\n            svg.attr('width', newWidth).attr('height', newHeight);\n          }\n\n          drawVisualization();\n        }, 100);\n      };\n\n      const generateUniqueId = async (data) => {\n        try {\n          const timestamp = Date.now().toString();\n          const random = Math.random().toString(36).substring(2, 15);\n          const dataString = JSON.stringify(data);\n          const combined = `${timestamp}-${random}-${dataString}`;\n\n          const encoder = new TextEncoder();\n          const dataBuffer = encoder.encode(combined);\n          const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n\n          const hashArray = Array.from(new Uint8Array(hashBuffer));\n          const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n\n          return hashHex.substring(0, 32);\n        } catch (error) {\n          const timestamp = Date.now().toString(36);\n          const random = Math.random().toString(36).substring(2, 15);\n          const dataHash = btoa(JSON.stringify(data)).substring(0, 10);\n          return `${timestamp}-${random}-${dataHash}`;\n        }\n      };\n\n      const cookieUtils = {\n        set(name, value, days = 365) {\n          const expires = new Date();\n          expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);\n\n          const isSecure = window.location.protocol === 'https:';\n          const secureFlag = isSecure ? '; Secure' : '';\n          document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/; SameSite=Lax${secureFlag}`;\n        },\n\n        get(name) {\n          const nameEQ = name + '=';\n          const cookies = document.cookie.split(';');\n          for (let i = 0; i < cookies.length; i++) {\n            let cookie = cookies[i];\n            while (cookie.charAt(0) === ' ') cookie = cookie.substring(1, cookie.length);\n            if (cookie.indexOf(nameEQ) === 0) {\n              return decodeURIComponent(cookie.substring(nameEQ.length, cookie.length));\n            }\n          }\n          return null;\n        },\n\n        test() {\n          try {\n            const testName = 'cookie_test_' + Date.now();\n            this.set(testName, 'test', 1);\n            const result = this.get(testName) === 'test';\n            this.remove(testName);\n            return result;\n          } catch (e) {\n            return false;\n          }\n        },\n\n        remove(name) {\n          document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`;\n        },\n      };\n\n      const handleVisibilityChange = () => {\n        if (!document.hidden) {\n          loadTotalCookieIds();\n        }\n      };\n\n      onMounted(() => {\n        cookieUtils.test();\n\n        loadTotalCookieIds();\n\n        document.addEventListener('visibilitychange', handleVisibilityChange);\n\n        const savedUniqueId = cookieUtils.get('political-spectrum_id');\n        if (savedUniqueId) {\n          currentUniqueId.value = savedUniqueId;\n          hasCookieId.value = true;\n        } else {\n          hasCookieId.value = false;\n        }\n\n        if (savedUniqueId) {\n          const savedCreatedAt = cookieUtils.get('political-spectrum_created_at');\n          if (savedCreatedAt) {\n            createdAt.value = savedCreatedAt;\n          }\n\n          const savedUpdatedAt = cookieUtils.get('political-spectrum_update_at');\n          if (savedUpdatedAt) {\n            updatedAt.value = savedUpdatedAt;\n          }\n        }\n\n        let hasSavedData = false;\n\n        let savedPositionsMap = null;\n\n        const savedPositionsJSON = cookieUtils.get('political-spectrum_positions');\n        if (savedPositionsJSON) {\n          try {\n            const parsed = JSON.parse(savedPositionsJSON);\n            if (parsed && typeof parsed === 'object') {\n              savedPositionsMap = parsed;\n\n              hasSavedData = POLITICIAN_NAMES.some((name) => {\n                const p = savedPositionsMap?.[name];\n                return p && p.x !== undefined && p.y !== undefined && p.x !== null && p.y !== null;\n              });\n            }\n          } catch (e) {\n            savedPositionsMap = null;\n          }\n        }\n\n        if (!hasSavedData) {\n          hasSavedData = POLITICIAN_NAMES.some((name) => {\n            const xPercent = cookieUtils.get(`political-spectrum_${name}_x`);\n            const yPercent = cookieUtils.get(`political-spectrum_${name}_y`);\n\n            return xPercent !== null && yPercent !== null;\n          });\n        }\n\n        // 使用 nextTick 确保DOM已准备好，然后使用 requestAnimationFrame 确保浏览器准备好渲染\n        nextTick(() => {\n          requestAnimationFrame(() => {\n            if (!contentContainer.value) return;\n            const containerRect = contentContainer.value.getBoundingClientRect();\n            const containerWidth = containerRect.width;\n            const containerHeight = containerRect.height;\n\n            // 如果容器尺寸无效，延迟重试\n            if (containerWidth <= 0 || containerHeight <= 0) {\n              setTimeout(() => {\n                if (!contentContainer.value) return;\n                const retryRect = contentContainer.value.getBoundingClientRect();\n                if (retryRect.width > 0 && retryRect.height > 0) {\n                  drawVisualization();\n                }\n              }, 100);\n              return;\n            }\n\n            const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n\n            const defaultPositions = calculateBoxPositions(firstSectionWidth, 0, containerHeight);\n\n            if (hasSavedData) {\n              if (!contentContainer.value) return;\n              const containerRect = contentContainer.value.getBoundingClientRect();\n              const containerWidth = containerRect.width;\n              const containerHeight = containerRect.height;\n\n              const thirdSectionWidth = calculateSideSectionWidth(containerWidth);\n              rightSectionWidth.value = thirdSectionWidth;\n\n              const grayAreaWidth = containerWidth - firstSectionWidth - thirdSectionWidth;\n              const grayAreaHeight = containerHeight;\n\n              const grayAreaLeft = firstSectionWidth;\n              const grayAreaTop = 0;\n\n              boxes = POLITICIAN_NAMES.map((name, index) => {\n                const defaultPos = defaultPositions[index];\n\n                const savedFromJson = savedPositionsMap?.[name];\n                const savedXPercent =\n                  savedFromJson?.x !== undefined && savedFromJson?.x !== null\n                    ? String(savedFromJson.x)\n                    : cookieUtils.get(`political-spectrum_${name}_x`);\n                const savedYPercent =\n                  savedFromJson?.y !== undefined && savedFromJson?.y !== null\n                    ? String(savedFromJson.y)\n                    : cookieUtils.get(`political-spectrum_${name}_y`);\n\n                let x = defaultPos.x;\n                let y = defaultPos.y;\n\n                if (\n                  savedXPercent !== null &&\n                  savedYPercent !== null &&\n                  savedXPercent !== '-1' &&\n                  savedYPercent !== '-1'\n                ) {\n                  const xPercent = parseFloat(savedXPercent);\n                  const yPercent = parseFloat(savedYPercent);\n                  x = grayAreaLeft + (xPercent / 100) * grayAreaWidth;\n                  y = grayAreaTop + (yPercent / 100) * grayAreaHeight;\n                }\n\n                return {\n                  x: x,\n                  y: y,\n                  defaultX: defaultPos.defaultX,\n                  defaultY: defaultPos.defaultY,\n                  name: name,\n                };\n              });\n\n              rearrangeWhiteAreaBoxes(firstSectionWidth, containerHeight);\n            } else {\n              boxes = defaultPositions;\n            }\n\n            drawVisualization();\n            window.addEventListener('resize', handleResize);\n          });\n        });\n      });\n\n      const saveToSupabase = async () => {\n        if (isSaving.value) return;\n\n        isSaving.value = true;\n\n        try {\n          if (!contentContainer.value) return;\n          const containerRect = contentContainer.value.getBoundingClientRect();\n          const containerWidth = containerRect.width;\n          const containerHeight = containerRect.height;\n\n          const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n          const thirdSectionWidth = calculateSideSectionWidth(containerWidth);\n          rightSectionWidth.value = thirdSectionWidth;\n\n          const grayAreaWidth = containerWidth - firstSectionWidth - thirdSectionWidth;\n          const grayAreaHeight = containerHeight;\n\n          const grayAreaLeft = firstSectionWidth;\n          const grayAreaTop = 0;\n          const grayAreaRight = grayAreaLeft + grayAreaWidth;\n          const grayAreaBottom = grayAreaTop + grayAreaHeight;\n\n          const allRecords = POLITICIAN_NAMES.map((name) => {\n            const box = boxes.find((b) => b.name === name);\n            let x = -1;\n            let y = -1;\n\n            if (box) {\n              const isInGrayArea = isTextInGradientArea(\n                box,\n                grayAreaLeft,\n                grayAreaTop,\n                grayAreaRight,\n                grayAreaBottom\n              );\n\n              if (isInGrayArea) {\n                const relativeX = box.x - grayAreaLeft;\n                const xPercent = Math.max(0, Math.min(100, (relativeX / grayAreaWidth) * 100));\n                x = Math.round(xPercent * 100) / 100;\n\n                const relativeY = box.y - grayAreaTop;\n                const yPercent = Math.max(0, Math.min(100, (relativeY / grayAreaHeight) * 100));\n                y = Math.round(yPercent * 100) / 100;\n              }\n            }\n\n            return {\n              name: name,\n              x: x,\n              y: y,\n            };\n          });\n\n          let uniqueId = currentUniqueId.value;\n          if (!uniqueId) {\n            uniqueId = await generateUniqueId(allRecords);\n            currentUniqueId.value = uniqueId;\n          }\n\n          const nowISO = new Date().toISOString();\n          const records = allRecords.map((item) => ({\n            cookie_id: uniqueId,\n            name: item.name,\n            x: item.x,\n            y: item.y,\n            update_at: nowISO,\n          }));\n\n          cookieUtils.set('political-spectrum_id', uniqueId, 365);\n\n          const now = new Date().toLocaleString('zh-TW', {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n          });\n\n          if (!createdAt.value) {\n            createdAt.value = now;\n            cookieUtils.set('political-spectrum_created_at', now, 365);\n          }\n\n          updatedAt.value = now;\n          cookieUtils.set('political-spectrum_update_at', now, 365);\n\n          const positionsForCookie = {};\n\n          boxes.forEach((box) => {\n            const isInGrayArea = isTextInGradientArea(\n              box,\n              grayAreaLeft,\n              grayAreaTop,\n              grayAreaRight,\n              grayAreaBottom\n            );\n\n            if (isInGrayArea) {\n              const relativeX = box.x - grayAreaLeft;\n              const xPercent = Math.max(\n                0,\n                Math.min(100, (relativeX / grayAreaWidth) * 100)\n              ).toFixed(2);\n\n              const relativeY = box.y - grayAreaTop;\n              const yPercent = Math.max(\n                0,\n                Math.min(100, (relativeY / grayAreaHeight) * 100)\n              ).toFixed(2);\n\n              positionsForCookie[box.name] = { x: xPercent, y: yPercent };\n            } else {\n              positionsForCookie[box.name] = { x: '-1', y: '-1' };\n            }\n          });\n\n          cookieUtils.set('political-spectrum_positions', JSON.stringify(positionsForCookie), 365);\n\n          currentUniqueId.value = uniqueId;\n          hasCookieId.value = true;\n\n          updateCoordinates();\n\n          if (!isConfigured()) {\n            isSaving.value = false;\n            router.push('/');\n            return;\n          }\n\n          const supabase = getSupabaseClient();\n\n          const { data: maxIdData, error: maxIdError } = await supabase\n            .from('data')\n            .select('id')\n            .order('id', { ascending: false })\n            .limit(1)\n            .maybeSingle();\n\n          if (maxIdError) {\n            throw new Error(`查詢最大ID時發生錯誤: ${maxIdError.message}`);\n          }\n\n          const maxId = maxIdData?.id || 0;\n\n          const recordsToInsert = [];\n          const recordsToUpdate = [];\n          let nextId = maxId + 1;\n\n          for (const record of records) {\n            const { data: existingData, error: queryError } = await supabase\n              .from('data')\n              .select('id')\n              .eq('cookie_id', record.cookie_id)\n              .eq('name', record.name)\n              .maybeSingle();\n\n            if (queryError) {\n              throw new Error(`查詢記錄時發生錯誤: ${queryError.message}`);\n            }\n\n            if (existingData) {\n              recordsToUpdate.push({\n                id: existingData.id,\n                x: record.x,\n                y: record.y,\n                update_at: record.update_at,\n              });\n            } else {\n              recordsToInsert.push({\n                ...record,\n                id: nextId++,\n              });\n            }\n          }\n\n          if (recordsToInsert.length > 0) {\n            const { error: insertError } = await supabase.from('data').insert(recordsToInsert);\n\n            if (insertError) {\n              throw new Error(`插入數據時發生錯誤: ${insertError.message}`);\n            }\n          }\n\n          if (recordsToUpdate.length > 0) {\n            for (const record of recordsToUpdate) {\n              const { error: updateError } = await supabase\n                .from('data')\n                .update({\n                  x: record.x,\n                  y: record.y,\n                  update_at: record.update_at,\n                })\n                .eq('id', record.id);\n\n              if (updateError) {\n                throw new Error(`更新數據時發生錯誤: ${updateError.message}`);\n              }\n            }\n          }\n\n          await loadTotalCookieIds();\n\n          isSaveSuccess.value = true;\n        } catch (error) {\n          router.push('/');\n        } finally {\n          isSaving.value = false;\n        }\n      };\n\n      const resetBoxes = () => {\n        if (!contentContainer.value) return;\n        const containerRect = contentContainer.value.getBoundingClientRect();\n        const containerWidth = containerRect.width;\n        const containerHeight = containerRect.height;\n\n        const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n\n        const newPositions = calculateBoxPositions(firstSectionWidth, 0, containerHeight);\n\n        boxes.forEach((box, index) => {\n          if (newPositions[index]) {\n            box.x = newPositions[index].defaultX;\n            box.y = newPositions[index].defaultY;\n            box.defaultX = newPositions[index].defaultX;\n            box.defaultY = newPositions[index].defaultY;\n          }\n        });\n\n        drawVisualization();\n      };\n\n      onUnmounted(() => {\n        window.removeEventListener('resize', handleResize);\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n      });\n\n      const goToResult = () => {\n        isSaveSuccess.value = false;\n        router.push('/result');\n      };\n\n      const closeSuccessDialog = () => {\n        isSaveSuccess.value = false;\n      };\n\n      const formatNumber = (value) => {\n        const formatter = d3.format(',');\n        return formatter(value);\n      };\n\n      const formattedTotalCookieIds = computed(() => {\n        return formatNumber(totalCookieIds.value);\n      });\n\n      return {\n        mainContainer,\n        contentContainer,\n        svgContainer,\n        buttonContainer,\n        boxesContainer,\n        nametagContainer,\n        leftSection,\n        centerSection,\n        rightSection,\n        rightSectionWidth,\n        confirmEnabled,\n        isSaving,\n        isSaveSuccess,\n        totalCookieIds,\n        formattedTotalCookieIds,\n        hasCookieId,\n        saveToSupabase,\n        resetBoxes,\n        goToResult,\n        closeSuccessDialog,\n      };\n    },\n  };\n</script>\n\n<style>\n  @import '../assets/css/common.css';\n</style>\n","import { createClient } from '@supabase/supabase-js';\n\nexport const SUPABASE_URL =\n  process.env.VUE_APP_SUPABASE_URL || 'https://qkduucehkgwbdawkbkvl.supabase.co';\n\nexport const SUPABASE_ANON_KEY =\n  process.env.VUE_APP_SUPABASE_ANON_KEY ||\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFrZHV1Y2Voa2d3YmRhd2tia3ZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NjY0MjEsImV4cCI6MjA4MTQ0MjQyMX0.aaI_0RJ1ERZbJMhSo01GvQtmSXS-dx-an60y_jrfaJs';\n\nexport const isConfigured = () => {\n  return (\n    SUPABASE_URL &&\n    SUPABASE_ANON_KEY &&\n    !SUPABASE_URL.includes('YOUR_SUPABASE_URL') &&\n    !SUPABASE_ANON_KEY.includes('YOUR_SUPABASE_ANON_KEY') &&\n    SUPABASE_URL.includes('supabase.co')\n  );\n};\n\nlet supabaseClient = null;\n\nexport const getSupabaseClient = () => {\n  if (!isConfigured()) {\n    throw new Error('Supabase configuration incomplete. Please set SUPABASE_URL and SUPABASE_ANON_KEY');\n  }\n\n  if (!supabaseClient) {\n    supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n  }\n\n  return supabaseClient;\n};\n","export const POLITICIAN_NAMES = [\n  '馬英九',\n  '蔡英文',\n  '賴清德',\n  '韓國瑜',\n  '柯文哲',\n  '傅崐萁',\n  '黃國昌',\n  '鄭麗文',\n];\n","export function getCSSVariable(variableName) {\n  const value = getComputedStyle(document.documentElement).getPropertyValue(variableName).trim();\n  // 如果值为空，返回默认值（避免在CSS未加载时返回空字符串导致黑色）\n  if (!value) {\n    // 根据变量名返回对应的默认颜色值\n    const defaults = {\n      '--my-color-blue': 'hsl(210, 85%, 65%)',\n      '--my-color-green': 'hsl(150, 85%, 65%)',\n      '--my-color-red': 'hsl(0, 85%, 65%)',\n      '--my-color-white': 'hsl(210, 60%, 92%)',\n      '--my-color-yellow': 'hsl(60, 98%, 63%)',\n      '--my-color-background-gray': '#dedede',\n      '--my-color-dark-gray': '#393939',\n      '--my-color-light-gray': '#7d7d7d',\n      '--my-color-highlight-gray': '#c8c8c8',\n    };\n    return defaults[variableName] || value;\n  }\n  return value;\n}\n\nexport function createGradientSpectrum({\n  svg,\n  colors,\n  gradientAreaLeft,\n  gradientAreaTop,\n  gradientAreaWidth,\n  gradientAreaHeight,\n}) {\n  // 验证颜色值，如果为空则使用默认值\n  const blue = colors.blue || 'hsl(210, 85%, 65%)';\n  const green = colors.green || 'hsl(150, 85%, 65%)';\n  const red = colors.red || 'hsl(0, 85%, 65%)';\n  const white = colors.white || 'hsl(210, 60%, 92%)';\n  const backgroundGray = colors.backgroundGray || '#dedede';\n\n  const defs = svg.append('defs');\n\n  const topLeftGradient = defs\n    .append('radialGradient')\n    .attr('id', 'topLeftGradient')\n    .attr('gradientUnits', 'objectBoundingBox')\n    .attr('cx', '0')\n    .attr('cy', '0')\n    .attr('r', '2.5');\n  topLeftGradient\n    .append('stop')\n    .attr('offset', '0%')\n    .attr('stop-color', blue)\n    .attr('stop-opacity', '1.0');\n  topLeftGradient\n    .append('stop')\n    .attr('offset', '92%')\n    .attr('stop-color', blue)\n    .attr('stop-opacity', '0');\n\n  const topRightGradient = defs\n    .append('radialGradient')\n    .attr('id', 'topRightGradient')\n    .attr('gradientUnits', 'objectBoundingBox')\n    .attr('cx', '1')\n    .attr('cy', '0')\n    .attr('r', '1.3');\n  topRightGradient\n    .append('stop')\n    .attr('offset', '0%')\n    .attr('stop-color', red)\n    .attr('stop-opacity', '1.0');\n  topRightGradient\n    .append('stop')\n    .attr('offset', '60%')\n    .attr('stop-color', red)\n    .attr('stop-opacity', '0');\n\n  const bottomLeftGradient = defs\n    .append('radialGradient')\n    .attr('id', 'bottomLeftGradient')\n    .attr('gradientUnits', 'objectBoundingBox')\n    .attr('cx', '0')\n    .attr('cy', '1')\n    .attr('r', '1.5');\n  bottomLeftGradient\n    .append('stop')\n    .attr('offset', '0%')\n    .attr('stop-color', green)\n    .attr('stop-opacity', '1.0');\n  bottomLeftGradient\n    .append('stop')\n    .attr('offset', '70%')\n    .attr('stop-color', green)\n    .attr('stop-opacity', '0');\n\n  const bottomRightGradient = defs\n    .append('radialGradient')\n    .attr('id', 'bottomRightGradient')\n    .attr('gradientUnits', 'objectBoundingBox')\n    .attr('cx', '1')\n    .attr('cy', '1')\n    .attr('r', '1.5');\n  bottomRightGradient\n    .append('stop')\n    .attr('offset', '0%')\n    .attr('stop-color', white)\n    .attr('stop-opacity', '1.0');\n  bottomRightGradient\n    .append('stop')\n    .attr('offset', '70%')\n    .attr('stop-color', white)\n    .attr('stop-opacity', '0');\n\n  svg\n    .append('rect')\n    .attr('x', gradientAreaLeft)\n    .attr('y', gradientAreaTop)\n    .attr('width', gradientAreaWidth)\n    .attr('height', gradientAreaHeight)\n    .attr('fill', backgroundGray);\n\n  svg\n    .append('rect')\n    .attr('x', gradientAreaLeft)\n    .attr('y', gradientAreaTop)\n    .attr('width', gradientAreaWidth)\n    .attr('height', gradientAreaHeight)\n    .attr('fill', 'url(#topLeftGradient)')\n    .attr('mix-blend-mode', 'screen');\n\n  svg\n    .append('rect')\n    .attr('x', gradientAreaLeft)\n    .attr('y', gradientAreaTop)\n    .attr('width', gradientAreaWidth)\n    .attr('height', gradientAreaHeight)\n    .attr('fill', 'url(#topRightGradient)')\n    .attr('mix-blend-mode', 'screen');\n\n  svg\n    .append('rect')\n    .attr('x', gradientAreaLeft)\n    .attr('y', gradientAreaTop)\n    .attr('width', gradientAreaWidth)\n    .attr('height', gradientAreaHeight)\n    .attr('fill', 'url(#bottomLeftGradient)')\n    .attr('mix-blend-mode', 'screen');\n\n  svg\n    .append('rect')\n    .attr('x', gradientAreaLeft)\n    .attr('y', gradientAreaTop)\n    .attr('width', gradientAreaWidth)\n    .attr('height', gradientAreaHeight)\n    .attr('fill', 'url(#bottomRightGradient)')\n    .attr('mix-blend-mode', 'screen');\n}\n","import { render } from \"./HomeView.vue?vue&type=template&id=50639583\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=50639583&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div\n    class=\"d-flex flex-column align-items-center m-0 p-0 w-100 h-100 overflow-hidden position-relative\"\n  >\n    <div\n      ref=\"diamondContainer\"\n      class=\"pe-none\"\n      style=\"\n        position: fixed;\n        z-index: 10000;\n        pointer-events: none;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      \"\n    ></div>\n    <div\n      ref=\"mainContainer\"\n      class=\"col-12 col-md-10 d-flex flex-column position-relative h-100 overflow-x-hidden\"\n    >\n      <div class=\"d-flex\">\n        <div class=\"d-none d-md-block my-width-20\"></div>\n        <div\n          class=\"text-center text-md-start d-flex flex-column justify-content-center py-3 my-title-content\"\n        >\n          <div>\n            <h1 class=\"mb-0 my-text-lg my-color-light-gray\">\n              {{ selectedName ? `${selectedName}的光譜` : '政治人物的光譜' }}\n            </h1>\n            <div class=\"my-text-sm my-text-dark-gray pt-3\">\n              <i class=\"fa-solid fa-diamond my-diamond-icon\"></i> 是你放的位置\n            </div>\n          </div>\n        </div>\n        <div class=\"d-none d-md-block my-side-section my-width-20\"></div>\n      </div>\n\n      <div\n        ref=\"contentContainer\"\n        class=\"d-flex position-relative min-w-0 min-h-0 overflow-hidden my-flex-1-1-0\"\n      >\n        <div ref=\"leftSection\" class=\"my-side-section position-relative z-1 my-width-20\">\n          <div\n            class=\"d-flex flex-column gap-2 align-items-end justify-content-center position-absolute top-0 start-0 end-0 bottom-0 pe-2 ps-0\"\n          >\n            <button\n              class=\"btn my-button my-text-sm rounded px-2 py-1 d-flex flex-column align-items-center\"\n              @click=\"goHome\"\n              type=\"button\"\n            >\n              <div\n                class=\"d-flex align-items-center justify-content-center rounded-circle mt-2 my-size-32 my-border-dark-gray\"\n              >\n                <i class=\"fas fa-arrow-left\"></i>\n              </div>\n              <span class=\"mt-2\">返回首頁</span>\n            </button>\n          </div>\n        </div>\n\n        <div\n          ref=\"centerSection\"\n          class=\"flex-grow-1 my-flex-grow-1 position-relative min-w-0 min-h-0 overflow-hidden my-flex-1-1-0\"\n        ></div>\n\n        <div ref=\"rightSection\" class=\"my-side-section position-relative z-3 my-width-20\">\n          <div\n            class=\"left-section d-flex flex-column align-items-start justify-content-center position-absolute top-0 start-0 end-0 bottom-0 ps-2 pe-0 overflow-y-auto gap-4\"\n          >\n            <button\n              v-for=\"name in POLITICIAN_NAMES\"\n              :key=\"name\"\n              class=\"btn my-button my-text-sm rounded px-2 py-1\"\n              :class=\"{ active: selectedName === name }\"\n              @click=\"handleNameClick(name)\"\n              type=\"button\"\n            >\n              {{ name }}\n            </button>\n          </div>\n        </div>\n\n        <div\n          ref=\"svgContainer\"\n          class=\"position-absolute top-0 start-0 end-0 bottom-0 z-2 pe-none\"\n        ></div>\n\n        <div\n          ref=\"boxesContainer\"\n          class=\"position-absolute top-0 start-0 end-0 bottom-0 z-3 pe-none\"\n        ></div>\n      </div>\n\n      <div class=\"d-flex\">\n        <div class=\"d-none d-md-block my-width-20\"></div>\n        <div\n          class=\"d-flex justify-content-between align-items-center py-2 px-2 px-md-0 my-footer-content\"\n        >\n          <div class=\"d-flex align-items-center gap-3\">\n            <span class=\"my-text-sm my-text-dark-gray\">共有 {{ totalDataPoints }} 個點</span>\n          </div>\n\n          <div class=\"my-text-sm my-text-dark-gray\">szfftz</div>\n        </div>\n        <div class=\"d-none d-md-block my-width-20\"></div>\n      </div>\n    </div>\n\n    <div v-if=\"loading\" class=\"my-loading-overlay text-center my-text-dark-gray\">\n      <div class=\"spinner-border mb-3 my-spinner-lg\" role=\"status\">\n        <span class=\"visually-hidden\">載入中...</span>\n      </div>\n      <p class=\"mt-3 mb-0 my-text-sm my-text-dark-gray\">正在載入數據...</p>\n    </div>\n\n    <div v-if=\"error\" class=\"my-error-overlay text-center p-5 rounded my-text-dark-gray\">\n      <div class=\"alert alert-danger mb-0\" role=\"alert\">\n        <i class=\"bi bi-exclamation-triangle-fill me-2\"></i><strong>錯誤：</strong>{{ error }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref, onMounted, onUnmounted } from 'vue';\n  import { useRouter } from 'vue-router';\n  import * as d3 from 'd3';\n  import { getSupabaseClient, isConfigured } from '../config/supabase.js';\n  import { POLITICIAN_NAMES } from '../config/constants.js';\n  import { getCSSVariable, createGradientSpectrum } from '../utils/utils.js';\n\n  export default {\n    name: 'ResultView',\n    setup() {\n      const router = useRouter();\n      const mainContainer = ref(null);\n      const contentContainer = ref(null);\n      const svgContainer = ref(null);\n      const boxesContainer = ref(null);\n      const diamondContainer = ref(null);\n      const leftSection = ref(null);\n      const centerSection = ref(null);\n      const rightSection = ref(null);\n      const rightSectionWidth = ref(0);\n      let svg = null;\n      let resizeTimer = null;\n      const loading = ref(false);\n      const error = ref(null);\n      const allDataPoints = ref([]);\n      const totalDataPoints = ref(0);\n      const selectedName = ref(null);\n      const cookieDataPoints = ref([]);\n\n      const colors = {\n        blue: getCSSVariable('--my-color-blue'),\n        green: getCSSVariable('--my-color-green'),\n        red: getCSSVariable('--my-color-red'),\n        white: getCSSVariable('--my-color-white'),\n        yellow: getCSSVariable('--my-color-yellow'),\n        dataPoint: getCSSVariable('--my-color-data-point'),\n        backgroundGray: getCSSVariable('--my-color-background-gray'),\n        darkGray: getCSSVariable('--my-color-dark-gray'),\n      };\n\n      const cookieUtils = {\n        get(name) {\n          const nameEQ = name + '=';\n          const cookies = document.cookie.split(';');\n          for (let i = 0; i < cookies.length; i++) {\n            let cookie = cookies[i];\n            while (cookie.charAt(0) === ' ') cookie = cookie.substring(1, cookie.length);\n            if (cookie.indexOf(nameEQ) === 0) {\n              return decodeURIComponent(cookie.substring(nameEQ.length, cookie.length));\n            }\n          }\n          return null;\n        },\n      };\n\n      const loadCookieData = () => {\n        const cookiePointsMap = new Map();\n\n        let positionsMap = null;\n        const savedPositionsJSON = cookieUtils.get('political-spectrum_positions');\n        if (savedPositionsJSON) {\n          try {\n            const parsed = JSON.parse(savedPositionsJSON);\n            if (parsed && typeof parsed === 'object') {\n              positionsMap = parsed;\n            }\n          } catch (e) {\n            positionsMap = null;\n          }\n        }\n\n        POLITICIAN_NAMES.forEach((name) => {\n          const fromJson = positionsMap?.[name];\n          const xPercent =\n            fromJson?.x !== undefined && fromJson?.x !== null\n              ? String(fromJson.x)\n              : cookieUtils.get(`political-spectrum_${name}_x`);\n          const yPercent =\n            fromJson?.y !== undefined && fromJson?.y !== null\n              ? String(fromJson.y)\n              : cookieUtils.get(`political-spectrum_${name}_y`);\n\n          if (\n            xPercent !== null &&\n            yPercent !== null &&\n            xPercent !== '-1' &&\n            yPercent !== '-1' &&\n            xPercent !== undefined &&\n            yPercent !== undefined\n          ) {\n            cookiePointsMap.set(name, {\n              name: name,\n              x: parseFloat(xPercent),\n              y: parseFloat(yPercent),\n            });\n          }\n        });\n\n        cookieDataPoints.value = Array.from(cookiePointsMap.values());\n      };\n\n      const calculateSideSectionWidth = (containerWidth) => {\n        if (!containerWidth || containerWidth <= 0) return 0;\n        return containerWidth * 0.2;\n      };\n\n      const loadData = async (name = null) => {\n        allDataPoints.value = [];\n        if (svgContainer.value) {\n          d3.select(svgContainer.value).selectAll('svg').remove();\n        }\n\n        if (!isConfigured()) {\n          error.value = 'Supabase 配置未完成';\n          loading.value = false;\n          totalDataPoints.value = 0;\n\n          setTimeout(() => {\n            drawVisualization();\n          }, 100);\n          return;\n        }\n\n        try {\n          const supabase = getSupabaseClient();\n\n          const allResults = [];\n          const pageSize = 1000;\n          let from = 0;\n          let hasMore = true;\n          let totalCount = null;\n\n          while (hasMore) {\n            let pageQuery = supabase.from('data').select('*', { count: 'exact' });\n\n            if (name) {\n              pageQuery = pageQuery.eq('name', name);\n            }\n\n            const {\n              data: pageData,\n              error: queryError,\n              count,\n            } = await pageQuery\n              .order('update_at', { ascending: false })\n              .range(from, from + pageSize - 1);\n\n            if (queryError) {\n              throw new Error(`查詢數據時發生錯誤: ${queryError.message}`);\n            }\n\n            if (count !== null && totalCount === null) {\n              totalCount = count;\n            }\n\n            if (pageData && pageData.length > 0) {\n              allResults.push(...pageData);\n              from += pageSize;\n\n              if (pageData.length < pageSize) {\n                hasMore = false;\n              }\n            } else {\n              hasMore = false;\n            }\n          }\n\n          const resultData = allResults;\n\n          if (!resultData) {\n            allDataPoints.value = [];\n            totalDataPoints.value = 0;\n            loading.value = false;\n            loadCookieData();\n            setTimeout(() => {\n              drawVisualization();\n            }, 100);\n            return;\n          }\n\n          const validPoints = resultData.filter((item) => {\n            const x = parseFloat(item.x);\n            const y = parseFloat(item.y);\n\n            return (\n              x !== -1 &&\n              y !== -1 &&\n              item.x !== null &&\n              item.y !== null &&\n              item.x !== undefined &&\n              item.y !== undefined &&\n              !isNaN(x) &&\n              !isNaN(y)\n            );\n          });\n\n          allDataPoints.value = validPoints;\n\n          totalDataPoints.value =\n            totalCount !== null ? totalCount : resultData ? resultData.length : 0;\n        } catch (err) {\n          error.value = err.message;\n          totalDataPoints.value = 0;\n        } finally {\n          loading.value = false;\n\n          loadCookieData();\n          setTimeout(() => {\n            drawVisualization();\n          }, 100);\n        }\n      };\n\n      const handleNameClick = (name) => {\n        if (selectedName.value === name) {\n          selectedName.value = null;\n\n          allDataPoints.value = [];\n          totalDataPoints.value = 0;\n          loading.value = false;\n\n          if (svgContainer.value) {\n            d3.select(svgContainer.value).selectAll('svg').remove();\n          }\n\n          loadCookieData();\n\n          setTimeout(() => {\n            drawVisualization();\n          }, 100);\n        } else {\n          selectedName.value = name;\n          loading.value = true;\n          loadData(selectedName.value);\n        }\n      };\n\n      const drawVisualization = () => {\n        if (!svgContainer.value || !contentContainer.value) return;\n\n        d3.select(svgContainer.value).selectAll('svg').remove();\n\n        const containerRect = contentContainer.value.getBoundingClientRect();\n        const containerWidth = containerRect.width;\n        const containerHeight = containerRect.height;\n\n        const firstSectionWidth = calculateSideSectionWidth(containerWidth);\n        const rightWidth = calculateSideSectionWidth(containerWidth);\n        rightSectionWidth.value = rightWidth;\n\n        const titleAreaHeight = 0;\n\n        const gradientAreaWidth = containerWidth - firstSectionWidth - rightWidth;\n        const gradientAreaHeight = containerHeight - titleAreaHeight;\n\n        const gradientAreaLeft = firstSectionWidth;\n        const gradientAreaTop = titleAreaHeight;\n\n        svg = d3\n          .select(svgContainer.value)\n          .append('svg')\n          .attr('width', containerWidth)\n          .attr('height', containerHeight)\n          .attr('class', 'd-block position-relative w-100 h-100')\n          .style('pointer-events', 'none');\n\n        createGradientSpectrum({\n          svg,\n          colors,\n          gradientAreaLeft,\n          gradientAreaTop,\n          gradientAreaWidth,\n          gradientAreaHeight,\n        });\n\n        if (allDataPoints.value.length > 0) {\n          const points = allDataPoints.value.map((item) => {\n            const xPercent = parseFloat(item.x);\n            const yPercent = parseFloat(item.y);\n\n            const x = gradientAreaLeft + (xPercent / 100) * gradientAreaWidth;\n            const y = gradientAreaTop + (yPercent / 100) * gradientAreaHeight;\n\n            return {\n              name: item.name,\n              x: x,\n              y: y,\n              xPercent: xPercent,\n              yPercent: yPercent,\n            };\n          });\n\n          const pointsGroup = svg.append('g').attr('class', 'data-points');\n          points.forEach((point) => {\n            pointsGroup\n              .append('circle')\n              .attr('cx', point.x)\n              .attr('cy', point.y)\n              .attr('r', 2)\n              .attr('fill', colors.darkGray)\n              .attr('opacity', 0.5);\n          });\n        }\n\n        if (diamondContainer.value && contentContainer.value) {\n          diamondContainer.value.innerHTML = '';\n\n          if (selectedName.value && cookieDataPoints.value.length > 0) {\n            const selectedCookiePoint = cookieDataPoints.value.find(\n              (item) => item.name === selectedName.value\n            );\n\n            if (selectedCookiePoint) {\n              const xPercent = parseFloat(selectedCookiePoint.x);\n              const yPercent = parseFloat(selectedCookiePoint.y);\n\n              const xInContent = gradientAreaLeft + (xPercent / 100) * gradientAreaWidth;\n              const yInContent = gradientAreaTop + (yPercent / 100) * gradientAreaHeight;\n\n              const contentRect = contentContainer.value.getBoundingClientRect();\n\n              const x = contentRect.left + xInContent;\n              const y = contentRect.top + yInContent;\n\n              const iconSize = 16;\n              const iconOffset = iconSize / 2;\n\n              const diamondElement = document.createElement('div');\n              diamondElement.className =\n                'position-absolute d-flex align-items-center justify-content-center';\n              diamondElement.style.left = `${x - iconOffset}px`;\n              diamondElement.style.top = `${y - iconOffset}px`;\n              diamondElement.style.width = `${iconSize}px`;\n              diamondElement.style.height = `${iconSize}px`;\n              diamondElement.setAttribute('data-name', selectedCookiePoint.name);\n\n              const iconElement = document.createElement('i');\n              iconElement.className = 'fa-solid fa-diamond my-diamond-icon';\n              iconElement.style.fontSize = `${iconSize}px`;\n\n              diamondElement.appendChild(iconElement);\n              diamondContainer.value.appendChild(diamondElement);\n            }\n          }\n        }\n      };\n\n      const handleResize = () => {\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n        resizeTimer = setTimeout(() => {\n          if (!loading.value && allDataPoints.value.length > 0) {\n            drawVisualization();\n          }\n        }, 100);\n      };\n\n      const goHome = () => {\n        router.push('/');\n      };\n\n      onMounted(() => {\n        const cookieId = cookieUtils.get('political-spectrum_id');\n        if (!cookieId) {\n          router.push('/');\n          return;\n        }\n\n        loadCookieData();\n\n        if (POLITICIAN_NAMES.length > 0) {\n          selectedName.value = POLITICIAN_NAMES[0];\n          loading.value = true;\n          loadData(selectedName.value);\n        } else {\n          loading.value = false;\n        }\n        window.addEventListener('resize', handleResize);\n      });\n\n      onUnmounted(() => {\n        window.removeEventListener('resize', handleResize);\n        if (resizeTimer) {\n          clearTimeout(resizeTimer);\n        }\n      });\n\n      return {\n        mainContainer,\n        contentContainer,\n        svgContainer,\n        boxesContainer,\n        diamondContainer,\n        leftSection,\n        centerSection,\n        rightSection,\n        rightSectionWidth,\n        loading,\n        error,\n        goHome,\n        POLITICIAN_NAMES,\n        selectedName,\n        handleNameClick,\n        allDataPoints,\n        totalDataPoints,\n      };\n    },\n  };\n</script>\n\n<style>\n  @import '../assets/css/common.css';\n</style>\n","import { render } from \"./ResultView.vue?vue&type=template&id=af2225a8\"\nimport script from \"./ResultView.vue?vue&type=script&lang=js\"\nexport * from \"./ResultView.vue?vue&type=script&lang=js\"\n\nimport \"./ResultView.vue?vue&type=style&index=0&id=af2225a8&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport ResultView from '../views/ResultView.vue';\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: HomeView,\n  },\n  {\n    path: '/result',\n    name: 'Result',\n    component: ResultView,\n  },\n];\n\nconst getBasePath = () => {\n  if (typeof window !== 'undefined') {\n    if (\n      window.location.hostname.includes('netlify.app') ||\n      window.location.hostname.includes('netlify.com')\n    ) {\n      return '/';\n    }\n    if (\n      window.location.hostname.includes('github.io') ||\n      window.location.hostname === 'localhost' ||\n      window.location.hostname === '127.0.0.1'\n    ) {\n      return '/political-spectrum/';\n    }\n  }\n  return '/political-spectrum/';\n};\n\nconst router = createRouter({\n  history: createWebHistory(getBasePath()),\n  routes,\n});\n\nrouter.afterEach((to) => {\n  if (typeof window !== 'undefined' && window.gtag) {\n    window.gtag('config', 'G-W4V1DVT65L', {\n      page_path: to.fullPath,\n    });\n  }\n});\n\nexport default router;\n","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\n\nimport App from './App.vue';\nimport router from './router';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\nimport './assets/css/common.css';\n\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nconst app = createApp(App);\n\nconst pinia = createPinia();\n\napp.use(router);\n\napp.use(pinia);\n\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpolitical_spectrum\"] = self[\"webpackChunkpolitical_spectrum\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5564); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_router_view","name","components","setup","setViewportHeight","vh","window","innerHeight","document","documentElement","setProperty","resizeTimer","handleResize","clearTimeout","setTimeout","onMounted","addEventListener","onUnmounted","removeEventListener","__exports__","render","ref","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_normalizeClass","$setup","confirmEnabled","isSaving","disabled","onClick","_cache","args","saveToSupabase","type","_hoisted_9","resetBoxes","_hoisted_10","hasCookieId","goToResult","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","role","isSaveSuccess","_hoisted_15","_hoisted_16","_hoisted_17","closeSuccessDialog","SUPABASE_URL","process","SUPABASE_ANON_KEY","isConfigured","includes","supabaseClient","getSupabaseClient","Error","createClient","POLITICIAN_NAMES","getCSSVariable","variableName","value","getComputedStyle","getPropertyValue","trim","defaults","createGradientSpectrum","svg","colors","gradientAreaLeft","gradientAreaTop","gradientAreaWidth","gradientAreaHeight","blue","green","red","white","backgroundGray","defs","append","topLeftGradient","attr","topRightGradient","bottomLeftGradient","bottomRightGradient","router","useRouter","mainContainer","contentContainer","svgContainer","buttonContainer","boxesContainer","nametagContainer","leftSection","centerSection","rightSection","rightSectionWidth","boxes","linesGroup","totalNames","totalCookieIds","loadTotalCookieIds","async","supabase","data","rpcData","error","rpcError","rpc","undefined","rpcErr","uniqueCookieIds","Set","pageSize","from","hasMore","pageData","queryError","select","not","order","ascending","range","length","forEach","item","cookie_id","add","size","err","getColors","darkGray","tagWidth","boxWidth","boxHeight","prevWidth","prevHeight","prevFirstSectionWidth","prevThirdSectionWidth","currentUniqueId","createdAt","updatedAt","isTextInGradientArea","box","grayAreaLeft","grayAreaTop","grayAreaRight","grayAreaBottom","x","y","initHTMLBoxes","firstSectionWidth","thirdSectionWidth","containerHeight","titleAreaHeight","innerHTML","contentRect","getBoundingClientRect","boxElement","createElement","className","setAttribute","width","height","pointerEvents","left","top","translateX","translateY","transform","textContainer","textElement","textContent","appendChild","isDragging","currentBox","animationFrameId","handleMove","e","startsWith","cancelable","preventDefault","cancelAnimationFrame","requestAnimationFrame","containerRect","clientX","clientY","touch","touches","changedTouches","containerWidth","minX","maxX","minY","maxY","constrainedX","Math","max","min","constrainedY","updateCoordinates","handleEnd","zIndex","classList","remove","isInGrayArea","rearrangeWhiteAreaBoxes","defaultX","defaultY","handleStart","passive","whiteAreaWidth","whiteAreaBoxes","filter","sort","a","b","indexA","indexOf","indexB","itemHeight","totalHeight","centerStartY","startY","rightPadding","rightX","index","newX","newY","querySelector","calculateSideSectionWidth","calculateBoxPositions","areaWidth","areaLeft","positions","names","push","grayAreaWidth","grayAreaHeight","selectAll","displayList","relativeX","relativeY","xPercent","yPercent","round","namesInGradientArea","map","hasNameNotInGradient","some","nextConfirmEnabled","prevConfirmEnabled","drawVisualization","currentColors","hasValidColors","d3","rightWidth","newPositions","newPos","existing","newWidth","newHeight","newFirstSectionWidth","newThirdSectionWidth","newGrayAreaWidth","newGrayAreaHeight","newGrayAreaLeft","newGrayAreaTop","newGrayAreaRight","newGrayAreaBottom","scaleX","scaleY","wasInTemporaryArea","newDefaultX","newDefaultY","tempPositions","tempPos","find","p","prevGrayAreaWidth","prevGrayAreaHeight","prevGrayAreaLeft","prevGrayAreaTop","clampedRelativeX","clampedRelativeY","generateUniqueId","timestamp","Date","now","toString","random","substring","dataString","JSON","stringify","combined","encoder","TextEncoder","dataBuffer","encode","hashBuffer","crypto","subtle","digest","hashArray","Array","Uint8Array","hashHex","padStart","join","dataHash","btoa","cookieUtils","set","days","expires","setTime","getTime","isSecure","location","protocol","secureFlag","cookie","encodeURIComponent","toUTCString","get","nameEQ","cookies","split","i","charAt","decodeURIComponent","test","testName","this","result","handleVisibilityChange","hidden","savedUniqueId","savedCreatedAt","savedUpdatedAt","hasSavedData","savedPositionsMap","savedPositionsJSON","parsed","parse","nextTick","retryRect","defaultPositions","defaultPos","savedFromJson","savedXPercent","String","savedYPercent","parseFloat","allRecords","uniqueId","nowISO","toISOString","records","update_at","toLocaleString","year","month","day","hour","minute","second","positionsForCookie","toFixed","maxIdData","maxIdError","limit","maybeSingle","message","maxId","id","recordsToInsert","recordsToUpdate","nextId","record","existingData","eq","insertError","insert","updateError","update","formatNumber","formatter","formattedTotalCookieIds","computed","_toDisplayString","selectedName","goHome","_Fragment","_renderList","key","active","$event","handleNameClick","_hoisted_18","_hoisted_19","totalDataPoints","loading","_hoisted_20","_hoisted_21","_hoisted_22","diamondContainer","allDataPoints","cookieDataPoints","yellow","dataPoint","loadCookieData","cookiePointsMap","Map","positionsMap","fromJson","values","loadData","allResults","totalCount","pageQuery","count","resultData","validPoints","isNaN","points","pointsGroup","point","selectedCookiePoint","xInContent","yInContent","iconSize","iconOffset","diamondElement","iconElement","fontSize","cookieId","routes","path","component","HomeView","ResultView","getBasePath","hostname","createRouter","history","createWebHistory","afterEach","to","gtag","page_path","fullPath","app","createApp","App","pinia","createPinia","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}